
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.3">
    
    
      
        <title>9.4.索引对象 - Python笔记</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1655a90d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

  

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Python笔记" class="md-header__button md-logo" aria-label="Python笔记">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python笔记
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              9.4.索引对象
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/siwing/siwing.github.io/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Python笔记" class="md-nav__button md-logo" aria-label="Python笔记">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Python笔记
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/siwing/siwing.github.io/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        计算机基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="计算机基础" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          计算机基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.1.CPU.html" class="md-nav__link">
        1.1.CPU
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.2.Memory.html" class="md-nav__link">
        1.2.Memory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.3.%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" class="md-nav__link">
        1.3.基本概念
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.4.%E7%BC%96%E8%AF%91%E5%9E%8B%E8%AF%AD%E8%A8%80%E5%92%8C%E8%A7%A3%E9%87%8A%E5%9E%8B%E8%AF%AD%E8%A8%80%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E5%AF%B9%E6%AF%94.html" class="md-nav__link">
        1.4.编译型语言 vs 解释型语言
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.5.%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81.html" class="md-nav__link">
        1.5.字符编码
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Python基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python基础" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Python基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.1.Python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html" class="md-nav__link">
        2.1.Python基本语法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.2.%E8%AF%AD%E5%8F%A5.html" class="md-nav__link">
        2.2.语句
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.3.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        2.3.数据类型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.4.Number.html" class="md-nav__link">
        2.4.Number
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.5.String.html" class="md-nav__link">
        2.5.String
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.6.List.html" class="md-nav__link">
        2.6.List
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.7.Tuple.html" class="md-nav__link">
        2.7.Tuple
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.8.Dict.html" class="md-nav__link">
        2.8.Dict
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.9.%E7%AE%80%E6%B4%81%E7%9A%84Python.html" class="md-nav__link">
        2.9.简洁的Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.10.%E8%B5%8B%E5%80%BC%E3%80%81immutable%E3%80%81%E6%B7%B1%E6%8B%B7%E8%B4%9D.html" class="md-nav__link">
        2.10.赋值、immutable、深拷贝
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.11.%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        2.11.函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.12.%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        2.12.内置函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.13.%E7%AE%80%E6%B4%81%E7%9A%84Python.html" class="md-nav__link">
        2.13.简洁的Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.1.%E5%BC%82%E5%B8%B8.html" class="md-nav__link">
        3.1.异常
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.2.%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F.html" class="md-nav__link">
        3.2.命名空间和作用域
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.3.%E9%97%AD%E5%8C%85.html" class="md-nav__link">
        3.3.闭包
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.4.%E8%A3%85%E9%A5%B0%E5%99%A8.html" class="md-nav__link">
        3.4.装饰器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.1.%E7%B1%BB.html" class="md-nav__link">
        4.1.类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.2.%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E5%92%8CMRO.html" class="md-nav__link">
        4.2.多重继承和MRO
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.3.%E6%A8%A1%E5%9D%97.html" class="md-nav__link">
        4.3.模块
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.4.%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95.html" class="md-nav__link">
        4.4.魔术方法
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        开发环境管理
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="开发环境管理" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          开发环境管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.1.conda%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        5.1.conda笔记
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.2.pip%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        5.2.pip笔记
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.3.pip%E5%AF%B9%E6%AF%94conda.html" class="md-nav__link">
        5.3.pip对比conda
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.4.anaconda.html" class="md-nav__link">
        5.4.anaconda
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.5.jupyter%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        5.5.jupyter使用笔记
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        标准库
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="标准库" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          标准库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.1.string.html" class="md-nav__link">
        6.1.string
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.2.textwrap.html" class="md-nav__link">
        6.2.textwrap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.3.time.html" class="md-nav__link">
        6.3.time
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.4.datetime.html" class="md-nav__link">
        6.4.datetime
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.5.calendar.html" class="md-nav__link">
        6.5.calendar
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.7.urllib.html" class="md-nav__link">
        6.7.urllib
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.8.requests.html" class="md-nav__link">
        6.8.requests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.9.re.html" class="md-nav__link">
        6.9.re
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.10.os_path.html" class="md-nav__link">
        6.10.os.path
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.11.traceback.html" class="md-nav__link">
        6.11.traceback
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.12.enum.html" class="md-nav__link">
        6.12.enum
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.13.difflib%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E6%AF%94%E8%BE%83.html" class="md-nav__link">
        6.13.difflib——字符比较
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.14.logging.html" class="md-nav__link">
        6.14.logging
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../标准库/6.15.Compression&Archiving.md" class="md-nav__link">
        6.15.Compression&Archiving
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.16.shutil.html" class="md-nav__link">
        6.16.shutil
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.17.test.html" class="md-nav__link">
        6.17.test
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        设计模式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="设计模式" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          设计模式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/7.1.%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80.html" class="md-nav__link">
        7.1.面向对象程序设计基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/7.2.%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.html" class="md-nav__link">
        7.2.面向对象软件设计原则
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/7.3.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html" class="md-nav__link">
        7.3.创建型模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../设计模式/7.4.结构型模式.md" class="md-nav__link">
        7.4.结构型模式
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        NumPy
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="NumPy" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          NumPy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.1.%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        8.1.创建数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.2.%E7%B4%A2%E5%BC%95.html" class="md-nav__link">
        8.2.索引
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.3.%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80.html" class="md-nav__link">
        8.3.内存布局
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.4.%E5%B9%BF%E6%92%AD.html" class="md-nav__link">
        8.4.广播
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.5.%E5%B8%B8%E9%87%8F.html" class="md-nav__link">
        8.5.常量
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.6.%E6%89%93%E5%8D%B0%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        8.6.打印数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.7.%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4.html" class="md-nav__link">
        8.7.添加和删除
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.8.%E5%BD%A2%E7%8A%B6%E6%93%8D%E7%BA%B5.html" class="md-nav__link">
        8.8.形状操纵
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.9.ufunc%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        8.9.ufunc函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.10.%E5%87%BD%E6%95%B0%E5%BA%93.html" class="md-nav__link">
        8.10.函数库
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.11.%E4%BF%9D%E5%AD%98%E5%92%8C%E5%8A%A0%E8%BD%BD.html" class="md-nav__link">
        8.11.保存和加载
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.12.%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        8.12.结构化数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.13.%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html" class="md-nav__link">
        8.13.数据处理
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      <label class="md-nav__link" for="__nav_8">
        pandas
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="pandas" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          pandas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.1.Series.html" class="md-nav__link">
        9.1.Series
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.2.DataFra.html" class="md-nav__link">
        9.2.DataFra
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.3.%E7%B4%A2%E5%BC%95.html" class="md-nav__link">
        9.3.索引
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          9.4.索引对象
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="9.4.%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1.html" class="md-nav__link md-nav__link--active">
        9.4.索引对象
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    索引对象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    Index
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiindex" class="md-nav__link">
    多级索引 MultiIndex
  </a>
  
    <nav class="md-nav" aria-label="多级索引 MultiIndex">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tuplemultiindex" class="md-nav__link">
    从tuple创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iterablesmultiindex" class="md-nav__link">
    从iterables创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dataframemultiindex" class="md-nav__link">
    从DataFrame创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-likemultiindex" class="md-nav__link">
    从list-like创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    选择数据
  </a>
  
    <nav class="md-nav" aria-label="选择数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    列索引是多级索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    行索引是多级索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    选择数据进阶
  </a>
  
    <nav class="md-nav" aria-label="选择数据进阶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    创建示例数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    使用切片
  </a>
  
    <nav class="md-nav" aria-label="使用切片">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slice" class="md-nav__link">
    slice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexslice" class="md-nav__link">
    IndexSlice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mask" class="md-nav__link">
    使用 mask 索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lociloc" class="md-nav__link">
    给 loc或iloc 指定轴参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    重新赋值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    交叉选择
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take" class="md-nav__link">
    Take方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    分类索引
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    间隔索引
  </a>
  
    <nav class="md-nav" aria-label="间隔索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    使用 间隔索引 来进行数据索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cut-qcut" class="md-nav__link">
    使用 cut 和 qcut来为数据分块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    生成一定区间内的间隔
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.5.%E7%B4%A2%E5%BC%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" class="md-nav__link">
        9.5.索引的基本操作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.6.%E6%8B%BC%E6%8E%A5.html" class="md-nav__link">
        9.6.拼接
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.7.%E5%8F%98%E6%8D%A2%E7%B4%A2%E5%BC%95.html" class="md-nav__link">
        9.7.变换索引
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.8.%E5%88%86%E7%BB%84%E4%B8%8E%E8%81%9A%E5%90%88.html" class="md-nav__link">
        9.8.分组与聚合
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.9.%E7%BB%98%E5%9B%BE.html" class="md-nav__link">
        9.9.绘图
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.11.%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html" class="md-nav__link">
        9.11.数据处理
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Matplotlib
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Matplotlib" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Matplotlib
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Matplotlib/10.1.%E6%9E%B6%E6%9E%84.html" class="md-nav__link">
        10.1.架构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Matplotlib/10.2.plot.html" class="md-nav__link">
        10.2.plot
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        scikit-learn
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="scikit-learn" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          scikit-learn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.1.%E6%95%B0%E6%8D%AE%E9%9B%86.html" class="md-nav__link">
        11.1.数据集
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.2.%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87.html" class="md-nav__link">
        11.2.评价指标-分类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.5.%E6%8B%86%E5%88%86%E6%95%B0%E6%8D%AE.html" class="md-nav__link">
        11.5.拆分数据
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.6.%E4%BA%A4%E5%8F%89%E9%AA%8C%E8%AF%81.html" class="md-nav__link">
        11.6.交叉验证
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.7.%E8%B6%85%E5%8F%82%E6%95%B0%E5%AF%BB%E4%BC%98.html" class="md-nav__link">
        11.7.超参数寻优
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.8.%E4%BF%9D%E5%AD%98%E6%A8%A1%E5%9E%8B.html" class="md-nav__link">
        11.8.保存模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.9.%E7%89%B9%E5%BE%81%E5%A4%84%E7%90%86.html" class="md-nav__link">
        11.9.特征处理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.10.%E8%BD%AC%E6%8D%A2%E9%A2%84%E6%B5%8B%E7%9B%AE%E6%A0%87y.html" class="md-nav__link">
        11.10.转换预测目标y
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.11.%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9.html" class="md-nav__link">
        11.11.特征选择
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.12.%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96.html" class="md-nav__link">
        11.12.特征提取
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.13.%E7%BC%BA%E5%A4%B1%E5%80%BC%E5%A4%84%E7%90%86.html" class="md-nav__link">
        11.13.缺失值处理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.14.%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92.html" class="md-nav__link">
        11.14.线性回归
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.15.%E5%86%B3%E7%AD%96%E6%A0%91.html" class="md-nav__link">
        11.15.决策树
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        tensorflow笔记
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="tensorflow笔记" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          tensorflow笔记
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.1.keras%E6%95%B0%E6%8D%AE%E9%9B%86.html" class="md-nav__link">
        12.1.keras数据集
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.2.%E5%88%9B%E5%BB%BA%E5%BC%A0%E9%87%8F.html" class="md-nav__link">
        12.2.创建张量
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.3.%E5%BC%A0%E9%87%8F%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C.html" class="md-nav__link">
        12.3.张量进阶操作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.4.%E6%B1%82%E5%AF%BC.html" class="md-nav__link">
        12.4.求导
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.5.%E5%8F%AF%E7%94%A8%E6%80%A7%E6%B5%8B%E8%AF%95.html" class="md-nav__link">
        12.5.可用性测试
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.6.Perceptron.html" class="md-nav__link">
        12.6.Perceptron
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tensorflow%E7%AC%94%E8%AE%B0/12.7.keras%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html" class="md-nav__link">
        12.7.keras快速开始
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      <label class="md-nav__link" for="__nav_12">
        爬虫
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="爬虫" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          爬虫
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%88%AC%E8%99%AB/13.1.lxml.html" class="md-nav__link">
        13.1.lxml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%88%AC%E8%99%AB/13.3.pyquery.html" class="md-nav__link">
        13.3.pyquery
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      <label class="md-nav__link" for="__nav_13">
        gensim
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="gensim" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          gensim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gensim/14.1.word2vec%20model.html" class="md-nav__link">
        14.1.word2vec model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gensim/14.2.word2vec%E5%8F%82%E6%95%B0.html" class="md-nav__link">
        14.2.word2vec参数
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      <label class="md-nav__link" for="__nav_14">
        数据库
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="数据库" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          数据库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.1.DBAPI.html" class="md-nav__link">
        15.1.DBAPI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.2.PostgreSQL.html" class="md-nav__link">
        15.2.PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.3.MSSQL.html" class="md-nav__link">
        15.3.MSSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.4.SQLAlchemy.html" class="md-nav__link">
        15.4.SQLAlchemy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      <label class="md-nav__link" for="__nav_15">
        文件操作
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="文件操作" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          文件操作
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/16.2.PDF.html" class="md-nav__link">
        16.2.PDF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/16.3.docx.html" class="md-nav__link">
        16.3.docx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/16.4.OCR.html" class="md-nav__link">
        16.4.OCR
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      <label class="md-nav__link" for="__nav_16">
        Docker
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/17.2.Dockerfile.html" class="md-nav__link">
        17.2.Dockerfile
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/17.3.Image.html" class="md-nav__link">
        17.3.Image
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      <label class="md-nav__link" for="__nav_17">
        Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/18.1.%E7%9B%AE%E5%BD%95%E8%A7%84%E8%8C%83.html" class="md-nav__link">
        18.1.目录规范
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/18.2.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" class="md-nav__link">
        18.2.常用命令
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    索引对象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    Index
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiindex" class="md-nav__link">
    多级索引 MultiIndex
  </a>
  
    <nav class="md-nav" aria-label="多级索引 MultiIndex">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tuplemultiindex" class="md-nav__link">
    从tuple创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iterablesmultiindex" class="md-nav__link">
    从iterables创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dataframemultiindex" class="md-nav__link">
    从DataFrame创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-likemultiindex" class="md-nav__link">
    从list-like创建MultiIndex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    选择数据
  </a>
  
    <nav class="md-nav" aria-label="选择数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    列索引是多级索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    行索引是多级索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    选择数据进阶
  </a>
  
    <nav class="md-nav" aria-label="选择数据进阶">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    创建示例数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    使用切片
  </a>
  
    <nav class="md-nav" aria-label="使用切片">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#slice" class="md-nav__link">
    slice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexslice" class="md-nav__link">
    IndexSlice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mask" class="md-nav__link">
    使用 mask 索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lociloc" class="md-nav__link">
    给 loc或iloc 指定轴参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    重新赋值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    交叉选择
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take" class="md-nav__link">
    Take方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    分类索引
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    间隔索引
  </a>
  
    <nav class="md-nav" aria-label="间隔索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    使用 间隔索引 来进行数据索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cut-qcut" class="md-nav__link">
    使用 cut 和 qcut来为数据分块
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    生成一定区间内的间隔
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/siwing/siwing.github.io/edit/master/docs/pandas/9.4.索引对象.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>9.4.索引对象</h1>
                
                <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">toolkit.Help</span> <span class="kn">import</span> <span class="n">Help</span> <span class="k">as</span> <span class="n">H</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">pprint</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Windows 10
Python 3.7.3 @ MSC v.1915 64 bit (AMD64)
Latest build date 2020.04.11
pandas version:  1.0.1
numpy version:  1.18.1
</code></pre></div>
<h2 id="_1">索引对象</h2>
<p>pandas的索引对象负责管理轴标签和其他元数据（比如轴名称等）。构建Series或DataFrame时，所用到的任何数组或其他序列的标签都会被转换成一个Index，而 <mark>index对象是不可变的</mark> ，也就是index对象的元素不可修改（immutable）。如果要修改index内容，只能通过重新赋值的形式。</p>
<p>不可修改性非常重要，因为这样才能使Index对象在多个数据结构之间安全共享。</p>
<p>下表列出了pandas中主要的Index对象：</p>
<table>
<thead>
<tr>
<th>类</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index</td>
<td>最泛化的Index对象，将轴标签表示为一个由Python对象组成的NumPy 数组</td>
</tr>
<tr>
<td>Int64lndex</td>
<td>针对整数的特殊Index</td>
</tr>
<tr>
<td>Multiindex</td>
<td>“层次化”索引对象，表示单个轴上的多层索引。可以看做由元组组成的数组</td>
</tr>
<tr>
<td>Datetimelndex</td>
<td>存储纳秒级时间截（用NumPy的datetime64类型表示）</td>
</tr>
<tr>
<td>Periodlndex</td>
<td>针对Period数据（时间间隔）的特殊Index</td>
</tr>
</tbody>
</table>
<p>以下是pandas中所有Index对象：</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="s1">&#39;CategoricalIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DatetimeIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Float64Index&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Index&#39;</span><span class="p">,</span>
 <span class="s1">&#39;Int64Index&#39;</span><span class="p">,</span>
 <span class="s1">&#39;IntervalIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MultiIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PeriodIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;RangeIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TimedeltaIndex&#39;</span><span class="p">,</span>
 <span class="s1">&#39;UInt64Index&#39;</span><span class="p">]</span>
</code></pre></div>
<p>每个索引都有一些方法和属性，它们可用于设置逻辑并回答有关该索引所包含的数据的常见问题。下表列出了这些函数：</p>
<table>
<thead>
<tr>
<th>说明</th>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>append</td>
<td>连接另一个index对象.产生一个新的Index</td>
</tr>
<tr>
<td>diff</td>
<td>计算差集，并得到一个Index</td>
</tr>
<tr>
<td>intersection</td>
<td>计算交集</td>
</tr>
<tr>
<td>union</td>
<td>计算并集</td>
</tr>
<tr>
<td>isin</td>
<td>计算一个指示各值是否都包含在参数集合中的布尔型数组</td>
</tr>
<tr>
<td>delete</td>
<td>删除索引i处的元素，并得到新的Index</td>
</tr>
<tr>
<td>drop</td>
<td>删除传入的值.并得到新的Index</td>
</tr>
<tr>
<td>insert</td>
<td>将元素插入到索引i处，并得到新的Index</td>
</tr>
<tr>
<td>is_monotonic</td>
<td>当各元素均大于等于前一个元素时，返回TRUE</td>
</tr>
<tr>
<td>is_unique</td>
<td>当Index没有重复值时，返回True</td>
</tr>
<tr>
<td>unique</td>
<td>计算Index中唯一值的数组</td>
</tr>
</tbody>
</table>
<h2 id="index">Index</h2>
<p><code>class pandas.Index(data=None, dtype=None, copy=False, name=None, fastpath=False, tupleize_cols=True)</code>：创建<code>Index</code>对象。</p>
<p>参数：</p>
<ul>
<li><code>data</code>：一个<code>array-like</code>，必须是一维的</li>
<li><code>name</code>：一个字符串，为<code>Index</code>的名字。</li>
<li><code>dtype</code>：指定数据类型。如果为<code>None</code>，则默认为<code>object</code></li>
<li><code>copy</code>：一个布尔值。如果为<code>True</code>，则拷贝输入数据<code>data</code></li>
<li><code>tupleize_cols</code>：一个布尔值，如果可能则尽量创建<code>MultiIndex</code>对象</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], dtype=&#39;object&#39;)
</code></pre></div>
<p>实际上，通过<code>pd.Index</code>类也可以创建<code>pd.Int64Index</code>、<code>pd.Float64Index</code>、<code>pd.RangeIndex</code>、<code>pd.UInt64Index</code>、<code>pd.DatetimeIndex</code>、<code>pd.TimedeltaIndex</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint64</span><span class="p">,</span>  <span class="n">name</span><span class="o">=</span><span class="s2">&quot;UInt64Index&quot;</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span>   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Int64Index&quot;</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Float64Index&quot;</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;RangeIndex&quot;</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()],</span>          <span class="n">name</span><span class="o">=</span><span class="s2">&quot;DatetimeIndex&quot;</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">timedelta</span><span class="p">(</span><span class="n">microseconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;TimedeltaIndex&quot;</span><span class="p">)))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;class &#39;pandas.core.indexes.numeric.UInt64Index&#39;&gt;
&lt;class &#39;pandas.core.indexes.numeric.Int64Index&#39;&gt;
&lt;class &#39;pandas.core.indexes.numeric.Float64Index&#39;&gt;
&lt;class &#39;pandas.core.indexes.range.RangeIndex&#39;&gt;
&lt;class &#39;pandas.core.indexes.datetimes.DatetimeIndex&#39;&gt;
&lt;class &#39;pandas.core.indexes.timedeltas.TimedeltaIndex&#39;&gt;
</code></pre></div>
<h2 id="multiindex">多级索引 MultiIndex</h2>
<p><code>MultiIndex</code>代表的是多级索引对象。它继承自<code>Index</code>，其中的多级<code>label</code>采用元组对象来表示。在<code>MultiIndex</code>内部，并不直接保存元组对象，而是使用多个<code>Index</code>对象保存索引中每级的<code>label</code>。</p>
<p><code>class pandas.MultiIndex(levels=None, labels=None, sortorder=None, names=None,</code> <code>copy=False, verify_integrity=True, _set_identity=True, name=None, **kwargs)</code></p>
<p>参数：</p>
<ul>
<li><code>levels</code>：一个数组的列表，给出了每一级的<code>level</code>。</li>
<li>
<p><code>labels</code>：一个数组的列表，给出了每一级<code>level</code>的下标。第$i$级<code>label</code>是这样产生的：</p>
<ul>
<li>
<p>首先获取<code>labels[i]</code>，它是一个下标序列，代表第$i$级。</p>
</li>
<li>
<p>假设第$k$位置为整数 3，在第$i$级第$k$位的<code>label</code>就是<code>levels[i][3]</code>。</p>
</li>
</ul>
</li>
<li>
<p><code>sortorder</code>：一个整数，给出了已经排序好了的<code>level</code>级别。</p>
</li>
<li><code>names</code>：一个字符串序列，给出了每个<code>Index</code>的<code>name</code>。其中每个级别对应一个<code>Index</code></li>
<li><code>copy</code>：一个布尔值。如果为<code>True</code>，则拷贝基础数据</li>
<li><code>verify_integrity</code>：一个布尔值。如果为<code>True</code>，则检测各级别的<code>label/level</code>都是连续的且有效的</li>
<li><code>name</code>：<code>MultiIndex</code>的名字</li>
</ul>
<p><strong>也可以通过下面的类方法来创建<code>MultiIndex</code>：</strong></p>
<ul>
<li><code>MultiIndex.from_arrays(arrays[, sortorder, ...])</code>：将二维序列转换为<code>MultiIndex</code>。其中<code>arrays</code>为<code>array-like</code>的序列，每个<code>array-like</code>按顺序的给出了一列<code>label</code>（一个级别）</li>
<li><code>MultiIndex.from_tuples(tuples[, sortorder, ...])</code> ：将元组序列转换为<code>MultiIndex</code>。其中<code>tuples</code>为<code>tuple-like</code>的序列，每个<code>array-like</code>按顺序的给出了一行<code>label</code>对（不同级别的一对）</li>
<li><code>MultiIndex.from_product(iterables[, ...])</code>：根据多个可迭代对象生成一个<code>MultiIndex</code>，其中使用笛卡尔积的算法。其中<code>iterables</code>为可迭代对象的序列</li>
</ul>
<p>也可以通过传递一个元组列表给<code>Index()</code>，并且将<code>tupleize_cols</code>设置为<code>True</code>来创建<code>MultiIndex</code></p>
<h3 id="tuplemultiindex">从tuple创建MultiIndex</h3>
<div class="highlight"><pre><span></span><code><span class="n">arrays</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]]</span>

<span class="n">tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">arrays</span><span class="p">))</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">tuples</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>

<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[(&#39;bar&#39;, &#39;one&#39;),
 (&#39;bar&#39;, &#39;two&#39;),
 (&#39;baz&#39;, &#39;one&#39;),
 (&#39;baz&#39;, &#39;two&#39;),
 (&#39;foo&#39;, &#39;one&#39;),
 (&#39;foo&#39;, &#39;two&#39;),
 (&#39;qux&#39;, &#39;one&#39;),
 (&#39;qux&#39;, &#39;two&#39;)]

MultiIndex([(&#39;bar&#39;, &#39;one&#39;),
            (&#39;bar&#39;, &#39;two&#39;),
            (&#39;baz&#39;, &#39;one&#39;),
            (&#39;baz&#39;, &#39;two&#39;),
            (&#39;foo&#39;, &#39;one&#39;),
            (&#39;foo&#39;, &#39;two&#39;),
            (&#39;qux&#39;, &#39;one&#39;),
            (&#39;qux&#39;, &#39;two&#39;)],
           names=[&#39;first&#39;, &#39;second&#39;])
</code></pre></div>
<h3 id="iterablesmultiindex">从iterables创建MultiIndex</h3>
<div class="highlight"><pre><span></span><code><span class="n">iterables</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]]</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">iterables</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">(</span><span class="n">iterables</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[[&#39;bar&#39;, &#39;baz&#39;, &#39;foo&#39;, &#39;qux&#39;], [&#39;one&#39;, &#39;two&#39;]]

MultiIndex([(&#39;bar&#39;, &#39;one&#39;),
            (&#39;bar&#39;, &#39;two&#39;),
            (&#39;baz&#39;, &#39;one&#39;),
            (&#39;baz&#39;, &#39;two&#39;),
            (&#39;foo&#39;, &#39;one&#39;),
            (&#39;foo&#39;, &#39;two&#39;),
            (&#39;qux&#39;, &#39;one&#39;),
            (&#39;qux&#39;, &#39;two&#39;)],
           names=[&#39;first&#39;, &#39;second&#39;])
</code></pre></div>
<h3 id="dataframemultiindex">从DataFrame创建MultiIndex</h3>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">],</span>
                    <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]],</span>
                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> 
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_frame</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  first second
0   bar    one
1   bar    two
2   foo    one
3   foo    two

MultiIndex([(&#39;bar&#39;, &#39;one&#39;),
            (&#39;bar&#39;, &#39;two&#39;),
            (&#39;foo&#39;, &#39;one&#39;),
            (&#39;foo&#39;, &#39;two&#39;)],
           names=[&#39;first&#39;, &#39;second&#39;])
</code></pre></div>
<h3 id="list-likemultiindex">从list-like创建MultiIndex</h3>
<div class="highlight"><pre><span></span><code><span class="n">arrays</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span><span class="s1">&#39;qux&#39;</span><span class="p">]),</span>
    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">])]</span> 
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">arrays</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">arrays</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[array([&#39;bar&#39;, &#39;bar&#39;, &#39;baz&#39;, &#39;baz&#39;, &#39;foo&#39;, &#39;foo&#39;, &#39;qux&#39;, &#39;qux&#39;],
      dtype=&#39;&lt;U3&#39;),
 array([&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;],
      dtype=&#39;&lt;U3&#39;)]
</code></pre></div>
<div class="highlight"><pre><span></span><code>                0         1         2         3
bar one  1.272859  1.590902  1.533832  0.896089
    two -1.338722 -0.930629  0.228179  1.229562
baz one -3.015706 -1.701900  1.237405 -2.174275
    two -0.826832 -1.058854 -0.367501  0.974535
foo one -0.617897 -1.102916 -0.049820  1.055834
    two -0.361094 -1.281896  0.596017 -0.763006
qux one  0.162307 -0.839610 -1.930223  0.178659
    two -1.095679  0.109408  0.342514  0.676979
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># s = pd.Series(np.random.randn(8), index=arrays)</span>
<span class="c1"># s</span>
</code></pre></div>
<h3 id="_2">选择数据</h3>
<h4 id="_3">列索引是多级索引</h4>
<p>创建示例dataframe： </p>
<div class="highlight"><pre><span></span><code><span class="n">tuples</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span>
         <span class="p">(</span><span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)]</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first        bar                 baz                 foo                 qux          
second       one       two       one       two       one       two       one       two
A      -0.943993  0.713135 -1.476287  0.148504 -0.745637  0.213429  0.292039  0.576053
B      -1.526875 -0.661510  0.233744 -2.124779  2.527988 -0.649525 -1.197415 -1.194035
C      -0.948963 -1.212174 -0.172934 -1.164432  0.017524 -0.044831  0.744810 -1.540683
</code></pre></div>
<p>dataframe的<code>[]</code>选择列：</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>second       one       two
A      -0.943993  0.713135
B      -1.526875 -0.661510
C      -0.948963 -1.212174
</code></pre></div>
<p><code>[]</code>使用多级索引：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 实际上与 df[(&quot;bar&quot;, &quot;one&quot;)] 等价</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>A   -0.943993
B   -1.526875
C   -0.948963
Name: (bar, one), dtype: float64
</code></pre></div>
<p><code>[[]]</code>选择多列：</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">]]</span> <span class="c1"># list</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first        bar                 baz                 foo
second       one       two       one       two       one       two
A      -0.943993  0.713135 -1.476287  0.148504 -0.745637  0.213429
B      -1.526875 -0.661510  0.233744 -2.124779  2.527988 -0.649525
C      -0.948963 -1.212174 -0.172934 -1.164432  0.017524 -0.044831
</code></pre></div>
<p><code>()</code>用于同一轴的多级索引：</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[[(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;baz&quot;</span><span class="p">,</span><span class="s2">&quot;one&quot;</span><span class="p">)]]</span> <span class="c1"># list of tuples</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first        bar       baz
second       one       one
A      -0.943993 -1.476287
B      -1.526875  0.233744
C      -0.948963 -0.172934
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># 行列索引</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># () 用于同一轴的多级索引</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">)],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># [] 用于增加轴 以下三行代码等价</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">)]],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">])],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">([</span><span class="s2">&quot;bar&quot;</span><span class="p">],</span> <span class="s2">&quot;one&quot;</span><span class="p">)],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># [] 用于增加轴</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>second
one   -0.943993
two    0.713135
Name: A, dtype: float64

-0.943993274158185

first  second
bar    one      -0.943993
Name: A, dtype: float64

first  second
bar    one      -0.943993
Name: A, dtype: float64

first  second
bar    one      -0.943993
Name: A, dtype: float64

first  second
bar    one      -0.943993
       two       0.713135
Name: A, dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># tuple of lists</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">([</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">])],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># list of tuples</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">)]],</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first  second
bar    one      -0.943993
       two       0.713135
foo    one      -0.745637
       two       0.213429
Name: A, dtype: float64

first  second
bar    one      -0.943993
foo    two       0.213429
Name: A, dtype: float64
</code></pre></div>
<h4 id="_4">行索引是多级索引</h4>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">arrays</span><span class="p">)</span>
<span class="n">df</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>                0         1         2         3
bar one -0.059500  1.192862  1.134994 -1.745307
    two  0.561741  1.629883  1.580909  0.052081
baz one -0.044704 -0.500037  0.104440 -0.226358
    two  0.393521 -0.188607  0.632692  0.983372
foo one  0.767599  1.202836 -0.720521 -0.407423
    two -0.624066  0.647863  0.250755  0.114761
qux one -0.671501  1.231328 -0.307714  0.155759
    two  1.349382 -0.866358  0.527276  0.587707
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>            0         1
one -0.059500  1.192862
two  0.561741  1.629883
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[([</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="s2">&quot;one&quot;</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="c1"># df.loc[([&#39;bar&#39;], &quot;one&quot;), (0, 1)]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>              0         1
bar one -0.0595  1.192862
</code></pre></div>
<h2 id="_5">选择数据进阶</h2>
<h3 id="_6">创建索引</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mklbl</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span> 
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>


<span class="n">miindex</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="n">mklbl</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                      <span class="n">mklbl</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                      <span class="n">mklbl</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                      <span class="n">mklbl</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>

<span class="n">micolumns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">),</span> 
                                       <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">),</span>
                                       <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">),</span> 
                                       <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;bah&#39;</span><span class="p">)],</span>
                                      <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;lvl0&#39;</span><span class="p">,</span> <span class="s1">&#39;lvl1&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">miindex</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">micolumns</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>MultiIndex([(&#39;A0&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A0&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A1&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A2&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B0&#39;, &#39;C3&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C0&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C1&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C2&#39;, &#39;D1&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D0&#39;),
            (&#39;A3&#39;, &#39;B1&#39;, &#39;C3&#39;, &#39;D1&#39;)],
           )

MultiIndex([(&#39;a&#39;, &#39;foo&#39;),
            (&#39;a&#39;, &#39;bar&#39;),
            (&#39;b&#39;, &#39;foo&#39;),
            (&#39;b&#39;, &#39;bah&#39;)],
           names=[&#39;lvl0&#39;, &#39;lvl1&#39;])
</code></pre></div>
<h3 id="_7">创建示例数据</h3>
<div class="highlight"><pre><span></span><code><span class="n">dfmi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">miindex</span><span class="p">)</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">micolumns</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">miindex</span><span class="p">),</span>
                                                                    <span class="nb">len</span><span class="p">(</span><span class="n">micolumns</span><span class="p">))),</span> 
                    <span class="n">index</span><span class="o">=</span><span class="n">miindex</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">micolumns</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">dfmi</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl0           a         b
lvl1         bar  foo  bah  foo
A0 B0 C0 D0    1    0    3    2
         D1    5    4    7    6
      C1 D0    9    8   11   10
         D1   13   12   15   14
      C2 D0   17   16   19   18
...          ...  ...  ...  ...
A3 B1 C1 D1  237  236  239  238
      C2 D0  241  240  243  242
         D1  245  244  247  246
      C3 D0  249  248  251  250
         D1  253  252  255  254

[64 rows x 4 columns]
</code></pre></div>
<h3 id="_8">使用切片</h3>
<h4 id="slice">slice</h4>
<div class="highlight"><pre><span></span><code><span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="nb">slice</span><span class="p">(</span><span class="s1">&#39;A1&#39;</span><span class="p">,</span> <span class="s1">&#39;A3&#39;</span><span class="p">),</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">]),</span> <span class="p">:]</span>
<span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;foo&#39;</span><span class="p">)]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl0        a    b
lvl1      foo  foo
B0 C0 D0   64   66
      D1   68   70
   C1 D0   72   74
      D1   76   78
   C2 D0   80   82
      D1   84   86
   C3 D0   88   90
      D1   92   94
B1 C0 D0   96   98
      D1  100  102
   C1 D0  104  106
      D1  108  110
   C2 D0  112  114
      D1  116  118
   C3 D0  120  122
      D1  124  126
</code></pre></div>
<h4 id="indexslice">IndexSlice</h4>
<div class="highlight"><pre><span></span><code><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">IndexSlice</span>
<span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">[:,</span> <span class="p">:,</span> <span class="p">[</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">]],</span> <span class="n">idx</span><span class="p">[:,</span> <span class="s1">&#39;foo&#39;</span><span class="p">]]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl0           a    b
lvl1         foo  foo
A0 B0 C1 D0    8   10
         D1   12   14
      C3 D0   24   26
         D1   28   30
   B1 C1 D0   40   42
         D1   44   46
      C3 D0   56   58
         D1   60   62
A1 B0 C1 D0   72   74
         D1   76   78
      C3 D0   88   90
         D1   92   94
   B1 C1 D0  104  106
         D1  108  110
      C3 D0  120  122
         D1  124  126
A2 B0 C1 D0  136  138
         D1  140  142
      C3 D0  152  154
         D1  156  158
   B1 C1 D0  168  170
         D1  172  174
      C3 D0  184  186
         D1  188  190
A3 B0 C1 D0  200  202
         D1  204  206
      C3 D0  216  218
         D1  220  222
   B1 C1 D0  232  234
         D1  236  238
      C3 D0  248  250
         D1  252  254
</code></pre></div>
<h3 id="mask">使用 mask 索引</h3>
<div class="highlight"><pre><span></span><code><span class="n">mask</span> <span class="o">=</span> <span class="n">dfmi</span><span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)]</span> <span class="o">&gt;</span> <span class="mi">200</span>
<span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="p">:,</span> <span class="p">[</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">]],</span> <span class="n">idx</span><span class="p">[:,</span> <span class="s1">&#39;foo&#39;</span><span class="p">]]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl0           a    b
lvl1         foo  foo
A3 B0 C1 D1  204  206
      C3 D0  216  218
         D1  220  222
   B1 C1 D0  232  234
         D1  236  238
      C3 D0  248  250
         D1  252  254
</code></pre></div>
<h3 id="lociloc">给 <code>loc</code>或<code>iloc</code> 指定轴参数</h3>
<p><code>loc</code>默认对行进行索引：</p>
<div class="highlight"><pre><span></span><code><span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="p">[</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">]]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl0           a         b
lvl1         bar  foo  bah  foo
A0 B0 C1 D0    9    8   11   10
         D1   13   12   15   14
      C3 D0   25   24   27   26
         D1   29   28   31   30
   B1 C1 D0   41   40   43   42
         D1   45   44   47   46
      C3 D0   57   56   59   58
         D1   61   60   63   62
A1 B0 C1 D0   73   72   75   74
         D1   77   76   79   78
      C3 D0   89   88   91   90
         D1   93   92   95   94
   B1 C1 D0  105  104  107  106
         D1  109  108  111  110
      C3 D0  121  120  123  122
         D1  125  124  127  126
A2 B0 C1 D0  137  136  139  138
         D1  141  140  143  142
      C3 D0  153  152  155  154
         D1  157  156  159  158
   B1 C1 D0  169  168  171  170
         D1  173  172  175  174
      C3 D0  185  184  187  186
         D1  189  188  191  190
A3 B0 C1 D0  201  200  203  202
         D1  205  204  207  206
      C3 D0  217  216  219  218
         D1  221  220  223  222
   B1 C1 D0  233  232  235  234
         D1  237  236  239  238
      C3 D0  249  248  251  250
         D1  253  252  255  254
</code></pre></div>
<p>可以指定<code>axis</code>参数，指定需要索引的轴：</p>
<div class="highlight"><pre><span></span><code><span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl1         bar  foo
A0 B0 C0 D0    1    0
         D1    5    4
      C1 D0    9    8
         D1   13   12
      C2 D0   17   16
...          ...  ...
A3 B1 C1 D1  237  236
      C2 D0  241  240
         D1  245  244
      C3 D0  249  248
         D1  253  252

[64 rows x 2 columns]
</code></pre></div>
<h3 id="_9">重新赋值</h3>
<div class="highlight"><pre><span></span><code><span class="n">df2</span> <span class="o">=</span> <span class="n">dfmi</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="p">[</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span>
<span class="n">df2</span>


<span class="n">df2</span> <span class="o">=</span> <span class="n">dfmi</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">[:,</span> <span class="p">:,</span> <span class="p">[</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">]],</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">df2</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="n">df2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>lvl0              a               b
lvl1            bar     foo     bah     foo
A0 B0 C0 D0       1       0       3       2
         D1       5       4       7       6
      C1 D0    9000    8000   11000   10000
         D1   13000   12000   15000   14000
      C2 D0      17      16      19      18
...             ...     ...     ...     ...
A3 B1 C1 D1  237000  236000  239000  238000
      C2 D0     241     240     243     242
         D1     245     244     247     246
      C3 D0  249000  248000  251000  250000
         D1  253000  252000  255000  254000

[64 rows x 4 columns]
</code></pre></div>
<h3 id="_10">交叉选择</h3>
<p><code>DataFrame</code> 的 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.xs.html#pandas.DataFrame.xs"><code>xs()</code></a>方法接受一个额外的参数，从而可以简便地在某个特定的多级索引中的某一个层级进行数据的选取。</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">[:</span><span class="mi">6</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">T</span>
<span class="n">df</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first        bar                 baz                 foo
second       one       two       one       two       one       two
0      -1.103671 -0.169328 -1.575613 -1.972754 -0.774569 -0.791508
1      -0.902346  1.154518  2.185713 -0.473948 -0.312497 -0.267216
2      -0.020286  1.012314 -1.039006  0.277789 -0.674508  0.707265
</code></pre></div>
<p><code>.xs</code>方法默认<code>axis=0</code>：</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first       bar       baz       foo
0     -1.103671 -1.575613 -0.774569
1     -0.902346  2.185713 -0.312497
2     -0.020286 -1.039006 -0.674508
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">((</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="s1">&#39;first&#39;</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first        bar
second       one
0      -1.103671
1      -0.902346
2      -0.020286
</code></pre></div>
<p><code>.xs</code>方法默认<code>drop_level=False</code>：</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">drop_level</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first        bar       baz       foo
second       one       one       one
0      -1.103671 -1.575613 -0.774569
1      -0.902346  2.185713 -0.312497
2      -0.020286 -1.039006 -0.674508
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">drop_level</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>first       bar       baz       foo
0     -1.103671 -1.575613 -0.774569
1     -0.902346  2.185713 -0.312497
2     -0.020286 -1.039006 -0.674508
</code></pre></div>
<h2 id="take">Take方法</h2>
<p>与<code>NumPy</code>的<code>ndarrays</code>相似，pandas的 <code>Index</code>， <code>Series</code>，和<code>DataFrame</code> 也提供 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.take.html#pandas.DataFrame.take"><code>take()</code></a>方法。他可以沿着某个维度，按照给定的索引取回所有的元素。这个给定的索引必须要是一个由整数组成的列表或者ndarray，用以指明在索引中的位置。<code>take</code> 也可以接受负整数，作为相对于结尾的相对位置。</p>
<div class="highlight"><pre><span></span><code><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

<span class="n">positions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">positions</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Int64Index([886, 20, 973, 555, 482, 741, 14, 455, 473, 483],
dtype=&#39;int64&#39;)
Int64Index([886, 483, 555], dtype=&#39;int64&#39;)
Int64Index([886, 483, 555], dtype=&#39;int64&#39;)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">positions</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>0    1.554295
9    2.223200
3    0.471164
dtype: float64
0    1.554295
9    2.223200
3    0.471164
dtype: float64
</code></pre></div>
<p>对于<code>DataFrames</code>来说，这个给定的索引应当是一个一维列表或者ndarray，用于指明行或者列的位置。</p>
<div class="highlight"><pre><span></span><code><span class="n">frm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">frm</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">frm</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">frm</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>          0         1         2
0 -0.847795 -1.868665 -0.309621
1  0.320975  0.344141 -0.947815
2 -0.960208  1.004652 -1.203950
3  0.756643  0.825118 -0.842164
4  0.834936 -1.210857  1.975266
          0         1         2
1  0.320975  0.344141 -0.947815
4  0.834936 -1.210857  1.975266
3  0.756643  0.825118 -0.842164
          0         2
0 -0.847795 -0.309621
1  0.320975 -0.947815
2 -0.960208 -1.203950
3  0.756643 -0.842164
4  0.834936  1.975266
</code></pre></div>
<p>需要注意的是， pandas对象的<code>take</code> 方法并不会正常地工作在布尔索引上，并且有可能会返回一切意外的结果。</p>
<div class="highlight"><pre><span></span><code><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[-0.88574368  0.48475226  0.30228338  1.40681914 -0.93639036
0.05250617
 -0.17633065  0.04839581  0.52009008  0.79065631]
[-0.88574368 -0.88574368  0.48475226  0.48475226]
[-0.88574368  0.48475226]
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>0    0.783778
1    0.804286
2    1.054039
3   -0.673453
4   -0.162131
5   -0.516954
6    0.474947
7    0.595180
8    0.961538
9    0.512165
dtype: float64
0    0.783778
0    0.783778
1    0.804286
1    0.804286
dtype: float64
0    0.783778
1    0.804286
dtype: float64
</code></pre></div>
<p>最后，关于性能方面的一个小建议，因为 <code>take</code> 方法处理的是一个范围更窄的输入，因此会比话实索引（fancy indexing）的速度快很多。</p>
<div class="highlight"><pre><span></span><code><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">indexer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">arr</span><span class="p">[</span><span class="n">indexer</span><span class="p">]</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">arr</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>The slowest run took 4.86 times longer than the fastest. This could mean that an intermediate result is being cached.
1.2 ms ± 688 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
291 µs ± 60.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">indexer</span><span class="p">]</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>The slowest run took 5.55 times longer than the fastest. This could mean that an intermediate result is being cached.
1.44 ms ± 1.03 ms per loop (mean ± std. dev. of 7 runs, 1000 loops each)
1.12 ms ± 504 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre></div>
<h2 id="_11">分类索引</h2>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex"><code>CategoricalIndex</code></a>分类索引非常适合有重复的索引。这是一个围绕<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Categorical.html#pandas.Categorical"><code>Categorical</code></a> 而创建的容器。这可以非常高效地存储和索引的具有大量重复元素的索引。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pandas.api.types</span> <span class="kn">import</span> <span class="n">CategoricalDtype</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span>
                    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aabbca&#39;</span><span class="p">)})</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">CategoricalDtype</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;cab&#39;</span><span class="p">)))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   A  B
0  0  a
1  1  a
2  2  b
3  3  b
4  4  c
5  5  a

A       int32
B    category
dtype: object

Index([&#39;c&#39;, &#39;a&#39;, &#39;b&#39;], dtype=&#39;object&#39;)
</code></pre></div>
<p>通过<code>.set_index()</code>建立一个有<code>CategoricalIndex</code> 分类索引的<code>df2</code>：</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df2</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CategoricalIndex([&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;], categories=[&#39;c&#39;, &#39;a&#39;,
&#39;b&#39;], ordered=False, name=&#39;B&#39;, dtype=&#39;category&#39;)
</code></pre></div>
<p>使用 <code>__getitem__/.iloc/.loc</code> 进行索引，在含有重复值的索引上的工作原理相似。索引值<strong>必须</strong>在一个分类中，否者将会引发<code>KeyError</code>错误。</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   A
B
a  0
a  1
a  5
</code></pre></div>
<p><code>CategoricalIndex</code> 在索引之后也会被<strong>保留</strong>：</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CategoricalIndex([&#39;a&#39;, &#39;a&#39;, &#39;a&#39;], categories=[&#39;c&#39;, &#39;a&#39;, &#39;b&#39;],
ordered=False, name=&#39;B&#39;, dtype=&#39;category&#39;)
</code></pre></div>
<p>索引排序将会按照类别清单中的顺序进行（我们已经基于 <code>CategoricalDtype(list('cab'))</code>建立了一个索引，因此排序的顺序是<code>cab</code>）</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   A
B
c  4
a  0
a  1
a  5
b  2
b  3
</code></pre></div>
<p>分组操作（Groupby）也会保留索引的全部信息。</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>CategoricalIndex([&#39;c&#39;, &#39;a&#39;, &#39;b&#39;], categories=[&#39;c&#39;, &#39;a&#39;, &#39;b&#39;],
ordered=False, name=&#39;B&#39;, dtype=&#39;category&#39;)
</code></pre></div>
<p>重设索引的操作将会根据输入的索引值返回一个索引。传入一个列表，将会返回一个最普通的<code>Index</code>；如果使用类别对象<code>Categorical</code>，则会返回一个分类索引<code>CategoricalIndex</code>，按照其中<strong>传入的</strong>的类别值<code>Categorical</code> dtype来进行索引。正如同你可以对<strong>任意</strong>pandas的索引进行重新索引一样，这将允许你随意索引任意的索引值，即便它们并<strong>不存在</strong>在你的类别对象中。</p>
<div class="highlight"><pre><span></span><code><span class="n">df2</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>
<span class="n">df2</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">index</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">df2</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">)))</span>

<span class="n">df2</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">)))</span><span class="o">.</span><span class="n">index</span>
</code></pre></div>
<h2 id="_12">间隔索引</h2>
<p>pandas在 0.20.0 版本中新加入 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex"><code>IntervalIndex</code></a>和它自己特有的<code>IntervalDtype</code>以及 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Interval.html#pandas.Interval"><code>Interval</code></a> 标量类型，在pandas中，间隔数据是获得头等支持的。</p>
<p><code>IntervalIndex</code>间隔索引允许一些唯一的索引，并且也是 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.cut.html#pandas.cut"><code>cut()</code></a> 和<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.qcut.html#pandas.qcut"><code>qcut()</code></a>的返回类型</p>
<h4 id="_13">使用 间隔索引 来进行数据索引</h4>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span>
                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">IntervalIndex</span><span class="o">.</span><span class="n">from_breaks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]))</span>

<span class="n">df</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>        A
(0, 1]  1
(1, 2]  2
(2, 3]  3
(3, 4]  4
</code></pre></div>
<p>间隔索引也可以使用基于标签的索引<code>.loc</code>：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 2位于(1, 2]之中</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>A    2
Name: (1, 2], dtype: int64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># 2位于(1, 2]之中  3位于(2, 3]之中</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>        A
(1, 2]  2
(2, 3]  3
</code></pre></div>
<p>如果标签被包含在间隔当中，这个间隔也将会被选择</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mf">2.5</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>A    3
Name: (2, 3], dtype: int64
        A
(2, 3]  3
(3, 4]  4
</code></pre></div>
<p>使用 <code>Interval</code>来选择数据，将只返回严格匹配（从pandas0.25.0开始）。</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>A    2
Name: (1, 2], dtype: int64
</code></pre></div>
<p>试图选择一个没有被严格包含在 <code>IntervalIndex</code> 内的区间<code>Interval</code>，将会出发<code>KeyError</code>错误。</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)]</span>
<span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;KeyError:&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>KeyError: Interval(0.5, 2.5, closed=&#39;right&#39;)
</code></pre></div>
<p>可以使用<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.IntervalIndex.overlaps.html#pandas.IntervalIndex.overlaps"><code>overlaps()</code></a>来创建一个布尔选择器，来选中所有与<strong>给定区间</strong>(<code>Interval</code>)重复的所有区间。</p>
<div class="highlight"><pre><span></span><code><span class="n">idxr</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">overlaps</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">idxr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">idxr</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[ True  True  True False]
        A
(0, 1]  1
(1, 2]  2
(2, 3]  3
</code></pre></div>
<h4 id="cut-qcut">使用 <code>cut</code> 和 <code>qcut</code>来为数据分块</h4>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.cut.html#pandas.cut"><code>cut()</code></a> 和 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.qcut.html#pandas.qcut"><code>qcut()</code></a> 都将返回一个分类<code>Categorical</code> 对象，并且每个分块区域都会以 分类索引<code>IntervalIndex</code>的方式被创建并保存在它的<code>.categories</code>属性中。</p>
<div class="highlight"><pre><span></span><code><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[(-0.003, 1.5], (-0.003, 1.5], (1.5, 3.0], (1.5, 3.0]]
Categories (2, interval[float64]): [(-0.003, 1.5] &lt; (1.5, 3.0]]
IntervalIndex([(-0.003, 1.5], (1.5, 3.0]],
              closed=&#39;right&#39;,
              dtype=&#39;interval[float64]&#39;)
</code></pre></div>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.cut.html#pandas.cut"><code>cut()</code></a> 也可以接受一个 <code>IntervalIndex</code> 作为他的 <code>bins</code> 参数，这样可以使用一个非常有用的pandas的写法。 首先，我们调用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.cut.html#pandas.cut"><code>cut()</code></a> 在一些数据上面，并且将 <code>bins</code>设置为某一个固定的数 ，从而生成bins。</p>
<p>随后，我们可以在其他的数据上调用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.cut.html#pandas.cut"><code>cut()</code></a>，并传入<code>.categories</code> 的值，作为 <code>bins</code>参数。这样新的数据就也将会被分配到同样的bins里面</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[(-0.003, 1.5], (1.5, 3.0], NaN, (-0.003, 1.5]]
Categories (2, interval[float64]): [(-0.003, 1.5] &lt; (1.5, 3.0]]
</code></pre></div>
<p>任何落在bins之外的数据都将会被设为 <code>NaN</code></p>
<h4 id="_14">生成一定区间内的间隔</h4>
<p>如果我们需要经常地使用步进区间，我们可以使用 <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.interval_range.html#pandas.interval_range"><code>interval_range()</code></a> 函数，结合 <code>start</code>, <code>end</code>, 和 <code>periods</code>来建立一个 <code>IntervalIndex</code> 对于数值型的间隔，默认的 <code>interval_range</code>间隔频率是1，对于datetime类型的间隔则是日历日。</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">end</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;3 days&#39;</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>IntervalIndex([(0 days 00:00:00, 1 days 00:00:00], (1 days 00:00:00, 2
days 00:00:00], (2 days 00:00:00, 3 days 00:00:00]],
              closed=&#39;right&#39;,
              dtype=&#39;interval[timedelta64[ns]]&#39;)
</code></pre></div>
<p><code>freq</code> 参数可以被用来明确非默认的频率，并且可以充分地利用各种各样的 <a href="https://www.pypandas.cn/docs/user_guide/timeseries.html#timeseries-offset-aliases">frequency aliases</a>datetime类型的时间间隔。</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;0 days&#39;</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;9H&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>IntervalIndex([(0 days 00:00:00, 0 days 09:00:00], (0 days 09:00:00, 0
days 18:00:00], (0 days 18:00:00, 1 days 03:00:00]],
              closed=&#39;right&#39;,
              dtype=&#39;interval[timedelta64[ns]]&#39;)
</code></pre></div>
<p>此外， <code>closed</code> 参数可以用来声明哪个边界是包含的。默认情况下，间隔的右界是包含的。</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">&#39;neither&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>IntervalIndex([(0, 1), (1, 2), (2, 3), (3, 4)],
              closed=&#39;neither&#39;,
              dtype=&#39;interval[int64]&#39;)
</code></pre></div>
<p>0.23.0版本加入的功能</p>
<p>使用<code>start</code>, <code>end</code>, 和 <code>periods</code>可以从 <code>start</code> 到 <code>end</code>（包含）生成一个平均分配的间隔，在返回<code>IntervalIndex</code>中生成<code>periods</code>这么多的元素（译者：区间）。</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">),</span>
                   <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2018-02-28&#39;</span><span class="p">),</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>IntervalIndex([(2018-01-01, 2018-01-20 08:00:00], (2018-01-20
08:00:00, 2018-02-08 16:00:00], (2018-02-08 16:00:00, 2018-02-28]],
              closed=&#39;right&#39;,
              dtype=&#39;interval[datetime64[ns]]&#39;)
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="9.3.%E7%B4%A2%E5%BC%95.html" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              9.3.索引
            </div>
          </div>
        </a>
      
      
        <a href="9.5.%E7%B4%A2%E5%BC%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              9.5.索引的基本操作
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.ca5457b8.min.js"></script>
      
        <script src="../javascript/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>