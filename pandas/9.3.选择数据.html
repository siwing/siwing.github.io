
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://siwing.github.io/pandas/9.3.%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE.html">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>9.3.选择数据 - Python笔记</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Python笔记" class="md-header__button md-logo" aria-label="Python笔记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python笔记
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              9.3.选择数据
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/siwing/siwing.github.io/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Python笔记" class="md-nav__button md-logo" aria-label="Python笔记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Python笔记
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/siwing/siwing.github.io/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        计算机基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="计算机基础" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          计算机基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.1.CPU.html" class="md-nav__link">
        1.1.CPU
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.2.Memory.html" class="md-nav__link">
        1.2.Memory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.3.%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" class="md-nav__link">
        1.3.基本概念
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.4.%E7%BC%96%E8%AF%91%E5%9E%8B%E8%AF%AD%E8%A8%80%E5%92%8C%E8%A7%A3%E9%87%8A%E5%9E%8B%E8%AF%AD%E8%A8%80%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E5%AF%B9%E6%AF%94.html" class="md-nav__link">
        1.4.编译型语言 vs 解释型语言
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/1.5.%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81.html" class="md-nav__link">
        1.5.字符编码
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Python基础
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python基础" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Python基础
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.1.Python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html" class="md-nav__link">
        2.1.Python基本语法
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.2.%E8%AF%AD%E5%8F%A5.html" class="md-nav__link">
        2.2.语句
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.3.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        2.3.数据类型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.4.Number.html" class="md-nav__link">
        2.4.Number
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.5.String.html" class="md-nav__link">
        2.5.String
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.6.List.html" class="md-nav__link">
        2.6.List
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.7.Tuple.html" class="md-nav__link">
        2.7.Tuple
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.8.Dict.html" class="md-nav__link">
        2.8.Dict
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.9.%E7%AE%80%E6%B4%81%E7%9A%84Python.html" class="md-nav__link">
        2.9.简洁的Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.10.%E8%B5%8B%E5%80%BC%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D.html" class="md-nav__link">
        2.10.赋值与深拷贝
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.11.%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        2.11.函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.12.%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        2.12.内置函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/2.13.%E7%AE%80%E6%B4%81%E7%9A%84Python.html" class="md-nav__link">
        2.13.简洁的Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.1.%E5%BC%82%E5%B8%B8.html" class="md-nav__link">
        3.1.异常
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.2.%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F.html" class="md-nav__link">
        3.2.命名空间和作用域
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.3.%E9%97%AD%E5%8C%85.html" class="md-nav__link">
        3.3.闭包
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/3.4.%E8%A3%85%E9%A5%B0%E5%99%A8.html" class="md-nav__link">
        3.4.装饰器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.1.%E7%B1%BB.html" class="md-nav__link">
        4.1.类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.2.%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF%E5%92%8CMRO.html" class="md-nav__link">
        4.2.多重继承和MRO
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.3.%E6%A8%A1%E5%9D%97.html" class="md-nav__link">
        4.3.模块
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Python%E5%9F%BA%E7%A1%80/4.4.%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95.html" class="md-nav__link">
        4.4.魔术方法
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        开发环境管理
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="开发环境管理" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          开发环境管理
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.1.conda%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        5.1.conda笔记
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.2.pip%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        5.2.pip笔记
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.3.pip%E5%AF%B9%E6%AF%94conda.html" class="md-nav__link">
        5.3.pip对比conda
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.4.anaconda.html" class="md-nav__link">
        5.4.anaconda
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86/5.5.jupyter%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0.html" class="md-nav__link">
        5.5.jupyter使用笔记
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        标准库
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="标准库" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          标准库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.1.string.html" class="md-nav__link">
        6.1.string
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.2.textwrap.html" class="md-nav__link">
        6.2.textwrap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.3.time.html" class="md-nav__link">
        6.3.time
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.4.datetime.html" class="md-nav__link">
        6.4.datetime
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.5.calendar.html" class="md-nav__link">
        6.5.calendar
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.7.urllib.html" class="md-nav__link">
        6.7.urllib
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.8.requests.html" class="md-nav__link">
        6.8.requests
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.9.re.html" class="md-nav__link">
        6.9.re
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.10.os_path.html" class="md-nav__link">
        6.10.os.path
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.11.traceback.html" class="md-nav__link">
        6.11.traceback
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.12.enum.html" class="md-nav__link">
        6.12.enum
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.13.difflib%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E6%AF%94%E8%BE%83.html" class="md-nav__link">
        6.13.difflib——字符比较
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.14.logging.html" class="md-nav__link">
        6.14.logging
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.15.Compression_Archiving.html" class="md-nav__link">
        6.15.Compression_Archiving
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%A0%87%E5%87%86%E5%BA%93/6.16.shutil.html" class="md-nav__link">
        6.16.shutil
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        设计模式
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="设计模式" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          设计模式
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/7.1.%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80.html" class="md-nav__link">
        7.1.面向对象程序设计基础
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/7.2.%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99.html" class="md-nav__link">
        7.2.面向对象软件设计原则
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/7.3.%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html" class="md-nav__link">
        7.3.创建型模式
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../设计模式/7.4.结构型模式.md" class="md-nav__link">
        7.4.结构型模式
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        NumPy
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="NumPy" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          NumPy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.1.%E5%88%9B%E5%BB%BA%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        8.1.创建数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.2.%E7%B4%A2%E5%BC%95.html" class="md-nav__link">
        8.2.索引
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.3.%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80.html" class="md-nav__link">
        8.3.内存布局
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.4.%E5%B9%BF%E6%92%AD.html" class="md-nav__link">
        8.4.广播
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.5.%E5%B8%B8%E9%87%8F.html" class="md-nav__link">
        8.5.常量
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.6.%E6%89%93%E5%8D%B0%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        8.6.打印数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.7.%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C.html" class="md-nav__link">
        8.7.数组操作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.8.ufunc%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        8.8.ufunc函数
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.9.%E5%87%BD%E6%95%B0%E5%BA%93.html" class="md-nav__link">
        8.9.函数库
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.10.%E4%BF%9D%E5%AD%98%E5%92%8C%E5%8A%A0%E8%BD%BD.html" class="md-nav__link">
        8.10.保存和加载
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.11.%E7%BB%93%E6%9E%84%E5%8C%96%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        8.11.结构化数组
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../NumPy/8.12.%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html" class="md-nav__link">
        8.12.数据处理
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      <label class="md-nav__link" for="__nav_8">
        pandas
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="pandas" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          pandas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.1.Series.html" class="md-nav__link">
        9.1.Series
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.2.DataFra.html" class="md-nav__link">
        9.2.DataFra
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          9.3.选择数据
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="9.3.%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE.html" class="md-nav__link md-nav__link--active">
        9.3.选择数据
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    索引规则
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    索引示例代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atiat" class="md-nav__link">
    at和iat特性——快速访问标量
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    重复的索引
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    运算对齐
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    存在缺失标签的索引
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    重新赋值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    get方法——返回默认值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lookup" class="md-nav__link">
    lookup方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take" class="md-nav__link">
    take方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    相关术语
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    视图和副本
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    链式赋值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    索引方式总结表
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.4.%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1.html" class="md-nav__link">
        9.4.索引对象
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.5.%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E8%BF%9B%E9%98%B6.html" class="md-nav__link">
        9.5.选择数据进阶
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.6.%E7%B4%A2%E5%BC%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" class="md-nav__link">
        9.6.索引的基本操作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.7.%E6%8B%BC%E6%8E%A5.html" class="md-nav__link">
        9.7.拼接
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.8.%E5%8F%98%E6%8D%A2%E7%B4%A2%E5%BC%95.html" class="md-nav__link">
        9.8.变换索引
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.9.%E5%88%86%E7%BB%84%E4%B8%8E%E8%81%9A%E5%90%88.html" class="md-nav__link">
        9.9.分组与聚合
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.10.%E7%BB%98%E5%9B%BE.html" class="md-nav__link">
        9.10.绘图
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="9.11.%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html" class="md-nav__link">
        9.11.数据处理
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Matplotlib
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Matplotlib" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Matplotlib
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Matplotlib/10.1.%E6%9E%B6%E6%9E%84.html" class="md-nav__link">
        10.1.架构
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Matplotlib/10.2.plot.html" class="md-nav__link">
        10.2.plot
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        scikit-learn
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="scikit-learn" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          scikit-learn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.1.%E6%95%B0%E6%8D%AE%E9%9B%86.html" class="md-nav__link">
        11.1.数据集
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.2.%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87.html" class="md-nav__link">
        11.2.评价指标-分类
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.5.%E6%8B%86%E5%88%86%E6%95%B0%E6%8D%AE.html" class="md-nav__link">
        11.5.拆分数据
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.6.%E4%BA%A4%E5%8F%89%E9%AA%8C%E8%AF%81.html" class="md-nav__link">
        11.6.交叉验证
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.7.%E8%B6%85%E5%8F%82%E6%95%B0%E5%AF%BB%E4%BC%98.html" class="md-nav__link">
        11.7.超参数寻优
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.8.%E4%BF%9D%E5%AD%98%E6%A8%A1%E5%9E%8B.html" class="md-nav__link">
        11.8.保存模型
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.9.%E7%89%B9%E5%BE%81%E5%A4%84%E7%90%86.html" class="md-nav__link">
        11.9.特征处理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.10.%E8%BD%AC%E6%8D%A2%E9%A2%84%E6%B5%8B%E7%9B%AE%E6%A0%87y.html" class="md-nav__link">
        11.10.转换预测目标y
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.11.%E7%89%B9%E5%BE%81%E9%80%89%E6%8B%A9.html" class="md-nav__link">
        11.11.特征选择
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.12.%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96.html" class="md-nav__link">
        11.12.特征提取
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.13.%E7%BC%BA%E5%A4%B1%E5%80%BC%E5%A4%84%E7%90%86.html" class="md-nav__link">
        11.13.缺失值处理
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.14.%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92.html" class="md-nav__link">
        11.14.线性回归
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../scikit-learn/11.15.%E5%86%B3%E7%AD%96%E6%A0%91.html" class="md-nav__link">
        11.15.决策树
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        TensorFlow
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="TensorFlow" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          TensorFlow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.1.keras%E6%95%B0%E6%8D%AE%E9%9B%86.html" class="md-nav__link">
        12.1.keras数据集
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.2.create%20tensor.html" class="md-nav__link">
        12.2.创建张量
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.3.%E5%BC%A0%E9%87%8F%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C.html" class="md-nav__link">
        12.3.张量进阶操作
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.4.Differentiation.html" class="md-nav__link">
        12.4.求导
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.5.%E5%8F%AF%E7%94%A8%E6%80%A7%E6%B5%8B%E8%AF%95.html" class="md-nav__link">
        12.5.可用性测试
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.6.Perceptron.html" class="md-nav__link">
        12.6.Perceptron
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.7.keras%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B.html" class="md-nav__link">
        12.7.keras快速开始
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../TensorFlow/12.8.math%20operations.html" class="md-nav__link">
        12.8.数学运算
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      <label class="md-nav__link" for="__nav_12">
        爬虫
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="爬虫" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          爬虫
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%88%AC%E8%99%AB/13.1.lxml.html" class="md-nav__link">
        13.1.lxml
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%88%AC%E8%99%AB/13.3.pyquery.html" class="md-nav__link">
        13.3.pyquery
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      <label class="md-nav__link" for="__nav_13">
        gensim
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="gensim" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          gensim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gensim/14.1.word2vec%20model.html" class="md-nav__link">
        14.1.word2vec model
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../gensim/14.2.word2vec%E5%8F%82%E6%95%B0.html" class="md-nav__link">
        14.2.word2vec参数
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      <label class="md-nav__link" for="__nav_14">
        数据库
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="数据库" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          数据库
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.1.DBAPI.html" class="md-nav__link">
        15.1.DBAPI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.2.PostgreSQL.html" class="md-nav__link">
        15.2.PostgreSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.3.MSSQL.html" class="md-nav__link">
        15.3.MSSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.4.SQLite.html" class="md-nav__link">
        15.4.SQLite
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%B0%E6%8D%AE%E5%BA%93/15.5.SQLAlchemy.html" class="md-nav__link">
        15.5.SQLAlchemy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      <label class="md-nav__link" for="__nav_15">
        文件操作
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="文件操作" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          文件操作
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/16.2.PDF.html" class="md-nav__link">
        16.2.PDF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/16.3.docx.html" class="md-nav__link">
        16.3.docx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/16.4.OCR.html" class="md-nav__link">
        16.4.OCR
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      <label class="md-nav__link" for="__nav_16">
        Docker
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/17.2.Dockerfile.html" class="md-nav__link">
        17.2.Dockerfile
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Docker/17.3.Image.html" class="md-nav__link">
        17.3.Image
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      <label class="md-nav__link" for="__nav_17">
        Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/18.1.%E7%9B%AE%E5%BD%95%E8%A7%84%E8%8C%83.html" class="md-nav__link">
        18.1.目录规范
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    索引规则
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    索引示例代码
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#atiat" class="md-nav__link">
    at和iat特性——快速访问标量
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    重复的索引
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    运算对齐
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    存在缺失标签的索引
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    重新赋值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get" class="md-nav__link">
    get方法——返回默认值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lookup" class="md-nav__link">
    lookup方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#take" class="md-nav__link">
    take方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    相关术语
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    视图和副本
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    链式赋值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    索引方式总结表
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/siwing/siwing.github.io/edit/master/docs/pandas/9.3.选择数据.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>9.3.选择数据</h1>
                
                <div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">toolkit</span> <span class="kn">import</span> <span class="n">H</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">copy</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Windows 10
Python 3.8.8 @ MSC v.1928 64 bit (AMD64)
Latest build date 2021.03.15
pandas version:  1.2.2
numpy version:  1.20.1
</code></pre></div>
<p>了解并区别 pandas 的各种索引方式对数据处理很有帮助。很多时候，挑选恰当的索引方式，可以避免或减少循环的使用。这不仅能让代码更清晰，而且还能极大地提升程序的性能。</p>
<p>pandas 基于 NumPy，并提供了和 NumPy 类似的数据索引方式。熟悉 NumPy 的用户可以很快上手 pandas 的数据选择方式，但仍可能对pandas的索引方式有一些困惑。</p>
<p>一方面，因为 NumPy 的索引方式很复杂，而 pandas 的索引方式则较为简单，NumPy 的一些索引规则不被 pandas 支持，例如 pandas 不支持整数数组索引；另一方面，pandas 提供类似 ndarray 的数据结构，但其索引规则和 NumPy 仍有一些区别。</p>
<h2 id="_1">索引规则</h2>
<p>pandas 提供了两种主要的数据结构：Series 和 DataFrame。Series 类似一维的 ndarray，而 DataFrame 类似二维的 ndarray。与 ndarray 不同的是，Series 和 DataFrame 可以有标签索引，而 ndarray 只有整数索引（除了结构数组）。Series 可以有行标签索引，DataFrame 则可以有行列标签索引。</p>
<p>pandas 支持如下索引种类：</p>
<ol>
<li>标量：整数、标签</li>
<li><code>1-D array-like</code>：整数序列、标签序列</li>
<li>切片：整数切片、标签切片</li>
<li>布尔数组</li>
</ol>
<p>与 NumPy 不同，pandas 有多种调用索引的方式：</p>
<ol>
<li>索引操作符<code>[]</code></li>
<li>特性<code>.loc\iloc</code></li>
<li>特性<code>.at\iat</code></li>
<li>方法<code>take\get</code></li>
</ol>
<p>索引规则：</p>
<ul>
<li>
<p>Series 只能索引行数据，因为 Series 只有一个维度。选择 Series 的数据时，无论是何种索引方式，都只能传入一个索引（行索引），否则报错。</p>
</li>
<li>
<p>索引操作符<code>[]</code>支持全部的索引种类，但<code>[]</code>只支持传入一个索引，例如<code>df[0, 1]</code>这种形式是不允许的。对于 DataFrame，使用标量索引（整数、标签）和序列索引时，<code>[]</code> 索引其列数据；使用切片索引时，<code>[]</code> 索引其行数据。</p>
</li>
<li>
<p><code>loc</code>支持全部的索引种类；<code>iloc</code>是 integer-location 的缩写，仅支持整数、一维整数序列、整数切片、布尔数组。选择 DataFrame 的数据时，<code>loc/iloc</code>可以省略列索引，不能省略行索引。</p>
</li>
<li>
<p><code>at</code>类似<code>loc</code>，但仅支持标签索引和整数索引；<code>iat</code>类似<code>iloc</code>，但仅支持整数索引。<code>at/iat</code>用于返回或设置标量。选择 DataFrame 的数据时，<code>at/iat</code>不能省略行索引或列索引。</p>
</li>
<li>
<p>如果 Series/DataFrame 设置了行标签或列标签，那么 Series 可以通过属性的方式访问或设置行标量，DataFrame 可以通过属性访问或设置列。</p>
</li>
<li>
<p>Series/DataFrame 的索引默认为整数值，此时<code>[]/loc/at</code>只能使用整数值索引；若设置了行标签或列标签，则只能用标签值索引。而<code>iloc/iat</code>在这两种情况下都可以使用整数值索引。</p>
</li>
<li>
<p>整数索引、标签索引意味着从对应的轴取出 1 个元素，因此，每多 1 个整数索引或标签索引，索引结果就减少 1 个维度。从 Series 抽取一个元素，返回标量；从 DataFrame 抽取一个元素，返回 Series 对象。</p>
</li>
<li>
<p>pandas 的切片索引有两种：整数切片、标签切片。整数切片是左闭右开的半开区间，和Python普通的整数切片一致；而标签切片是闭区间，即其末端是包含的（inclusive）。</p>
</li>
<li>
<p>若索引结果是标量，则丢失其索引信息；若索引结果是 Series 或 DataFrame，其对应的索引信息会被保留。</p>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>仅当<code>index</code>或<code>columns</code>是Python中有效的标识符时，Series或DataFrame才可以通过属性访问行或列。例如，<code>ser.1</code>是不允许的。</p>
<p>另外，<code>index</code>或<code>columns</code>与现有方法名冲突时，该<code>index</code>或<code>columns</code>则无法通过属性的方式访问。</p>
</div>
<h2 id="_2">索引示例代码</h2>
<div class="tabbed-set" data-tabs="1:7"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">创建示例数据</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">7.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.3</span><span class="p">,</span> <span class="mf">3.6</span><span class="p">,</span> <span class="mf">6.1</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>d    4.5
b    7.2
a   -5.3
c    3.6
b    6.1
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]),</span>
     <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
b  2.0    2
c  3.0    3
d  NaN    4
e  5.0    5
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">选择行</label><div class="tabbed-content">
<div class="tabbed-set" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">整数索引</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return scalar</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>7.2
7.2
7.2
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># equal to df.iloc[0, :]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>one    1.0
two    1.0
Name: a, dtype: float64
</code></pre></div>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">标签索引</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return scalar</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
b    6.1
dtype: float64
b    7.2
b    6.1
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>  <span class="c1"># equal to df.loc[&quot;a&quot;, :]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>one    1.0
two    1.0
Name: a, dtype: float64
</code></pre></div>
</div>
<input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><label for="__tabbed_2_3">属性</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
b    6.1
dtype: float64
</code></pre></div>
</div>
</div>
</div>
<input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><label for="__tabbed_1_3">选择列</label><div class="tabbed-content">
<div class="tabbed-set" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">整数索引</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>a    1.0
b    2.0
c    3.0
d    NaN
e    5.0
Name: one, dtype: float64
</code></pre></div>
</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">标签</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;one&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>a    1.0
b    2.0
c    3.0
d    NaN
e    5.0
Name: one, dtype: float64
a    1.0
b    2.0
c    3.0
d    NaN
e    5.0
Name: one, dtype: float64
</code></pre></div>
</div>
<input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><label for="__tabbed_3_3">属性</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">one</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>a    1.0
b    2.0
c    3.0
d    NaN
e    5.0
Name: one, dtype: float64
</code></pre></div>
</div>
</div>
</div>
<input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><label for="__tabbed_1_4">选择多行</label><div class="tabbed-content">
<div class="tabbed-set" data-tabs="4:4"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">整数序列</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
d    4.5
dtype: float64
b    7.2
d    4.5
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>  <span class="c1"># equal to df.loc[[0, 1], :]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
b  2.0    2
</code></pre></div>
</div>
<input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><label for="__tabbed_4_2">标签序列</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
b    6.1
a   -5.3
dtype: float64
b    7.2
b    6.1
a   -5.3
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
b  2.0    2
</code></pre></div>
<p>不能使用<code>()</code></p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)]</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Too many indexers
</code></pre></div>
</div>
<input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><label for="__tabbed_4_3">整数切片</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
a   -5.3
dtype: float64
b    7.2
a   -5.3
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
c  3.0    3
   one  two
a  1.0    1
b  2.0    2
</code></pre></div>
</div>
<input id="__tabbed_4_4" name="__tabbed_4" type="radio" /><label for="__tabbed_4_4">标签切片</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return Series</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">:</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>d    4.5
b    7.2
a   -5.3
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">:</span><span class="s2">&quot;c&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
b  2.0    2
c  3.0    3
</code></pre></div>
</div>
</div>
</div>
<input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><label for="__tabbed_1_5">选择多列</label><div class="tabbed-content">
<div class="tabbed-set" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">标签序列</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">]])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
b  2.0    2
c  3.0    3
d  NaN    4
e  5.0    5
   one  two
a  1.0    1
b  2.0    2
c  3.0    3
d  NaN    4
e  5.0    5
</code></pre></div>
</div>
<input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><label for="__tabbed_5_2">标签切片</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return DataFrame</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;one&quot;</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
b  2.0    2
c  3.0    3
d  NaN    4
e  5.0    5
</code></pre></div>
<p>使用切片索引时，<code>[]</code>索引行数据，而不是索引列数据：</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">:</span><span class="s2">&quot;two&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Empty DataFrame
Columns: [one, two]
Index: []
</code></pre></div>
</div>
</div>
</div>
<input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><label for="__tabbed_1_6">选择标量</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="c1"># Series --&gt; Return scalar</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>4.5
4.5
4.5
4.5
4.5
4.5
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame --&gt; Return scalar</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">][</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>  <span class="c1"># Not recommended</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>1.0
1.0
1.0
1.0
1.0
</code></pre></div>
<p>如果存在重复的标签，在使用标签索引时，Series 和 DataFrame 都会返回 Series，而非标量：</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
b    6.1
dtype: float64
</code></pre></div>
</div>
<input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><label for="__tabbed_1_7">选择多行多列</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>

<span class="c1"># First select a single column, then select multiple rows</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">][[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]])</span>  <span class="c1"># Not recommended</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">]])</span>  <span class="c1"># Not recommended</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0    1
c  3.0    3
   one  two
a  1.0    1
c  3.0    3
a    1.0
c    3.0
Name: one, dtype: float64
   one  two
a  1.0    1
c  3.0    3
</code></pre></div>
</div>
</div>
<h2 id="atiat"><code>at</code>和<code>iat</code>特性——快速访问标量</h2>
<p>因为索引<code>[]</code>必须处理很多情况（标签列表，切片，布尔索引等），所以它有一些开销。如果只想访问标量值，最快的方法是使用<code>at</code>和<code>iat</code>方法。</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>b    7.2
b    6.1
dtype: float64
4.5
1.0
1
</code></pre></div>
<p><code>at\iat</code>与<code>loc\iloc</code>相似，但<code>at\iat</code>不支持切片和布尔索引。</p>
<h2 id="_3">重复的索引</h2>
<p>虽然很多时候都强调轴标签（索引值）要唯一，但这并不是强制性的。来看看下面这个简单的带有重复索引值的DataFrame：</p>
<div class="highlight"><pre><span></span><code><span class="n">obj</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span>
                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">])</span>
</code></pre></div>
<p>索引的is_unique属性可以告诉你它的值是否是唯一的</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">is_unique</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>False
False
</code></pre></div>
<p>对于带有重复值的索引，数据选取的行为将会有些不同。如果某个索引对应多个值，则返回一个Series；而对应单个值的，则返回一个标量值。</p>
<h2 id="_4">运算对齐</h2>
<p>对Series进行运算（布尔索引过滤、标量乘法、数学函数等），都会保留标签和值之间的链接。</p>
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                 <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>     c    d
a  2.0  1.0
b  4.0  3.0
</code></pre></div>
<h2 id="_5">存在缺失标签的索引</h2>
<p>在旧版本的pandas中，<code>.loc[list-of-labels]</code>只要有一个<code>label</code>存在，代码就可以正常工作，否则将引发<code>KeyError</code>。但从0.21版本开始，不推荐此行为。推荐的代替方案是使用<code>.reindex()</code>方法。在较新的pandas版本，只要索引中存在缺失的标签，将引发<code>KeyError</code>。</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
a  1.0  1.0
b  2.0  2.0
y  NaN  NaN
z  NaN  NaN
</code></pre></div>
<p>如果<code>df</code>中存在重复的索引，<code>reindex</code>将引发<code>ValueError</code>：</p>
<div class="highlight"><pre><span></span><code><span class="n">df_tmp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">]),</span>
                       <span class="s1">&#39;two&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])})</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">df_tmp</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>cannot reindex from a duplicate axis
</code></pre></div>
<p>如果使用切片索引（整数/标签切片），即使切片超出范围，也不会引发错误。如果整个切片都不在索引范围，则返回空Series，或空DataFrame。</p>
<h2 id="_6">重新赋值</h2>
<p><code>[]/iloc/loc/iat/at</code>不仅可以返回所选数据，还可以给所选数据赋值：</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;two&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
</code></pre></div>
<p>使用<code>[]/loc/at</code>为不存在的标签赋值时，可以给DataFrame添加新的标签行或标签列，即对目标对象执行放大操作（enlargement）。</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[</span><span class="s2">&quot;three&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>     one  two  three
a    1.0    1     30
b    2.0    2     30
c    3.0    3     30
d    NaN    4     30
e    5.0    5     30
two  2.0    2     30
</code></pre></div>
<p>使用数值索引的<code>iloc/iat</code>则不支持放大操作。<code>xs\take\lookup</code>方法只能用于获取值，不能用于赋值。</p>
<h2 id="get"><code>get</code>方法——返回默认值</h2>
<div class="highlight"><pre><span></span><code>df.get(key, default=None)
</code></pre></div>
<p>Series或DataFrame都有一个<code>get</code>方法，这类似字典的<code>get</code>方法，可以返回默认值。对于Series，<code>get</code>方法对行进行索引；对于DataFrame，<code>get</code>方法对列进行索引。</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">]),</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">],</span> <span class="mi">5</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>-5.3
     one  two
a    1.0    1
b    2.0    2
c    3.0    3
d    NaN    4
e    5.0    5
two  2.0    2 5
     one  three
a    1.0     30
b    2.0     30
c    3.0     30
d    NaN     30
e    5.0     30
two  2.0     30
</code></pre></div>
<h2 id="lookup"><code>lookup</code>方法</h2>
<p>给定一系列行标签和列标签的情况下提取一组值，返回NumPy数组：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># 返回 (&#39;c&#39;,&#39;one&#39;) 和 (&#39;b&#39;,&#39;two&#39;)</span>
<span class="n">df</span><span class="o">.</span><span class="n">lookup</span><span class="p">([</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>&lt;ipython-input-1-9520edc4baa0&gt;:2: FutureWarning: The &#39;lookup&#39; method
is deprecated and will beremoved in a future version.You can use
DataFrame.melt and DataFrame.locas a substitute.
  df.lookup([&quot;c&quot;, &quot;b&quot;], [&quot;one&quot;, &quot;two&quot;])
</code></pre></div>
<div class="highlight"><pre><span></span><code>array([3., 2.])
</code></pre></div>
<h2 id="take"><code>take</code>方法</h2>
<div class="highlight"><pre><span></span><code>pd.DataFrame.take(self, indices, axis=0, is_copy=None, kwargs)
</code></pre></div>
<ul>
<li><code>indices</code>：一个整数数组，指明了所需元素的位置。</li>
</ul>
<p>与<code>ndarray</code>相似，pandas的 <code>Index</code>、<code>Series</code>和<code>DataFrame</code> 也提供<code>take()</code>方法。它可以沿着某个维度，按照给定的索引取回所有的元素。<code>take</code>方法不使用标签索引，这意味着给定的索引必须是指明元素位置的整数索引。这个整数索引必须是一维的array-like。<code>take</code> 也可以接受负整数，作为相对于结尾的相对位置。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Index</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

<span class="n">positions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">[</span><span class="n">positions</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Int64Index([700, 922, 341, 534, 648, 885, 0, 215, 882, 889], dtype=&#39;int64&#39;)
Int64Index([700, 889, 534], dtype=&#39;int64&#39;)
Int64Index([700, 889, 534], dtype=&#39;int64&#39;)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Series</span>
<span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">positions</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">positions</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>0    0.759892
9    2.094738
3   -0.599890
dtype: float64
0    0.759892
9    2.094738
3   -0.599890
dtype: float64
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># DataFrame</span>
<span class="n">frm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">frm</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">frm</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">frm</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>          0         1         2
0 -0.578601  1.044800  1.194279
1 -1.600242  1.506052  1.185538
2  1.027127 -0.723504 -2.328613
3  0.285260 -1.157831  0.564503
4  1.219048  0.374449  0.014576
          0         1         2
1 -1.600242  1.506052  1.185538
4  1.219048  0.374449  0.014576
3  0.285260 -1.157831  0.564503
          0         2
0 -0.578601  1.194279
1 -1.600242  1.185538
2  1.027127 -2.328613
3  0.285260  0.564503
4  1.219048  0.014576
</code></pre></div>
<p>需要注意的是，pandas对象的<code>take</code>方法并不会正常地工作在布尔索引上，并且有可能会返回一切意外的结果。</p>
<div class="highlight"><pre><span></span><code><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[0 0 1 1]
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]))</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>0    0
0    0
1    1
1    1
dtype: int32
</code></pre></div>
<p>最后，关于性能方面的一个小建议，因为<code>take</code>方法处理的是一个范围更窄的输入，因此会比花式索引（fancy indexing）的速度快很多。</p>
<div class="highlight"><pre><span></span><code><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">indexer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">arr</span><span class="p">[</span><span class="n">indexer</span><span class="p">]</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">arr</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>492 µs ± 148 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
196 µs ± 31.5 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">indexer</span><span class="p">]</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>519 µs ± 175 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
441 µs ± 234 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre></div>
<h2 id="_7">相关术语</h2>
<p>为了深入了解 pandas 的索引，我们先定义一些下面会用到的术语：</p>
<ul>
<li>赋值/分配/设置（Assignment/set）：设置某对象的值的操作。</li>
<li>获取/访问（Access/get）：从某对象获取值的操作。</li>
<li>索引操作（Indexing）：访问或设置某数据对象的子集，例如<code>df['one']</code>、<code>df['one']=10</code>。</li>
<li>链式索引（chained indexing）：背靠背地使用多个索引操作，例如<code>df['one']['second']</code>。</li>
<li>链式赋值（chained assignment）：通过背靠背地使用多个索引操作进行赋值，例如<code>df['one']['second']=10</code>。</li>
</ul>
<p>padnas 的索引操作包含了获取（indexing-get）和赋值（indexing-set）两个功能，而链式赋值是链式索引和赋值操作的结合。</p>
<h2 id="_8">视图和副本</h2>
<p>熟悉 NumPy 的用户都会知道，ndarray 数组的索引结果有视图和副本之分。副本是原数据的完整拷贝，其物理内存和原数据的内存在同一个位置。视图是原数据的别称或引用，其物理内存和原数据的内存位于相同的物理位置。对副本进行修改，不会影响原数据，而修改视图则会影响原数据。</p>
<p>pandas 的索引结果也分为视图和副本。因为 pandas 的底层操作基于 NumPy，其索引结果返回视图还是副本的逻辑也是来自于 NumPy。</p>
<p>ndarray 所有元素都是同质的，即都具有相同的<code>dtype</code>。但 DataFrame 并非总是如此。如果一个 DataFrame 的所有列都是相同的<code>dtype</code>，那么它是 single-dtyped object；如果一个 DataFrame 的列不是全部具有相同的 dtype，那么它是 multi-dtyped object，或者称为 mixed-type。</p>
<p>如果索引结果是 multi-dtyped DataFrame，那么索引结果必定是副本。因为 pandas 无法将 multi-dtyped DataFrame 作为单个同质的 NumPy 数组的视图返回。但是，为了提高效率，返回 single-dtyped DataFrame 的索引操作可能返回一个视图，具体取决于对象的内存布局。</p>
<p>NumPy 数组的<code>flags</code>属性可以显示数组是副本还是视图，但 pandas 的 DataFrame 并没有对外暴露这样的接口。不过，DataFrame 的一些私有属性包含了这些信息，我们可以访问这些私有属性，从而判断索引结果是副本还是视图。</p>
<div class="tabbed-set" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">创建示例</label><div class="tabbed-content">
<p>创建示例 DataFrame：</p>
<div class="highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span>
        <span class="s2">&quot;three&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">]}</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is view?&quot;</span><span class="p">,</span> <span class="n">mixed_df</span><span class="o">.</span><span class="n">_is_view</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is mixed-type?&quot;</span><span class="p">,</span> <span class="n">mixed_df</span><span class="o">.</span><span class="n">_is_mixed_type</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is single-dtyped?&quot;</span><span class="p">,</span> <span class="n">mixed_df</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">is_single_block</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">]}</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is view?&quot;</span><span class="p">,</span> <span class="n">single_df</span><span class="o">.</span><span class="n">_is_view</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is mixed-type?&quot;</span><span class="p">,</span> <span class="n">single_df</span><span class="o">.</span><span class="n">_is_mixed_type</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Is single-dtyped?&quot;</span><span class="p">,</span> <span class="n">single_df</span><span class="o">.</span><span class="n">_mgr</span><span class="o">.</span><span class="n">is_single_block</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;mixed_df 内存地址:&quot;</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">mixed_df</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single_df 内存地址:&quot;</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">single_df</span><span class="p">))</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Is view? False
Is mixed-type? True
Is single-dtyped? False
Is view? False
Is mixed-type? False
Is single-dtyped? True
mixed_df 内存地址: 0X293C66A4850
single_df 内存地址: 0X293C6648640
</code></pre></div>
</div>
<input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><label for="__tabbed_6_2">定义<code>get_df_info</code>函数</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_df_info</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">original_df</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">original_df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">backup_df</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">original_df</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">backup_df</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Is view?&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">_is_view</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">_is_view</span> <span class="o">!=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Is &#39;values.base&#39; None?&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Is &#39;values.base&#39; None?&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">base</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Is mixed-type?&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">_is_mixed_type</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Is copy?&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">_is_copy</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;0x00000&quot;</span><span class="p">,</span> <span class="s2">&quot;0x&quot;</span><span class="p">))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Result type:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="o">.</span><span class="n">to_list</span><span class="p">())</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Result type:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>

    <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">timestamp_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">original_df</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp_int</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">_is_view</span> <span class="o">==</span> <span class="p">(</span><span class="n">timestamp_int</span> <span class="ow">in</span> <span class="n">original_df</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Is original dataframe modified?&quot;</span><span class="p">,</span>
                  <span class="n">timestamp_int</span> <span class="ow">in</span> <span class="n">original_df</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Is original dataframe modified?&quot;</span><span class="p">,</span>
                  <span class="n">timestamp_int</span> <span class="ow">in</span> <span class="n">original_df</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

    <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span> <span class="s2">&quot;raise&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">timestamp_int</span>
    <span class="k">except</span> <span class="n">pd</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">SettingWithCopyError</span><span class="p">:</span>
        <span class="c1"># print(&#39;\033[31mSettingWithCopyError\033[0m&#39;)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* SettingWithCopyError&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">backup_df</span>
</code></pre></div>
</div>
</div>
<div class="tabbed-set" data-tabs="7:4"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">整数</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single row from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single row from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single column from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single column from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>single row from a mixed-type DataFrame:
  Is view? False
  Is &#39;values.base&#39; None? True
  Is mixed-type? False
  Is copy? &lt;weakref at 0x293C669A4F0; to &#39;DataFrame&#39; at 0x293C66A4850&gt;
  Result type: object
  Is original dataframe modified? False
* SettingWithCopyError
single row from a single-typed DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: int64
  Is original dataframe modified? True
single column from a mixed-type DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: object
  Is original dataframe modified? True
* SettingWithCopyError
single column from a single-typed DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: int64
  Is original dataframe modified? True
</code></pre></div>
</div>
<input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><label for="__tabbed_7_2">标签</label><div class="tabbed-content">
<p>标签索引得到的结果和整数索引是一样的。</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single row from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single row from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single column from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;one&quot;</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single column from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;one&quot;</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>single row from a mixed-type DataFrame:
  Is view? False
  Is &#39;values.base&#39; None? True
  Is mixed-type? False
  Is copy? &lt;weakref at 0x293C669AE50; to &#39;DataFrame&#39; at 0x293C6648640&gt;
  Result type: object
  Is original dataframe modified? False
* SettingWithCopyError
single row from a single-typed DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: int64
  Is original dataframe modified? True
single column from a mixed-type DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: int64
  Is original dataframe modified? True
* SettingWithCopyError
single column from a single-typed DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: int64
  Is original dataframe modified? True
</code></pre></div>
</div>
<input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><label for="__tabbed_7_3">序列</label><div class="tabbed-content">
<p>整数序列和标签序列得到的结果是一致的，因此这里只展示整数序列的结果。</p>
<div class="highlight"><pre><span></span><code><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-rows from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-rows from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-columns from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">index</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-columns from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">index</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>multi-rows from a mixed-type DataFrame:
  Is view? False
* Is &#39;values.base&#39; None? False
  Is mixed-type? True
  Is copy? &lt;weakref at 0x293C66A50E0; to &#39;DataFrame&#39; at 0x293C66A4AF0&gt;
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;), dtype(&#39;O&#39;)]
  Is original dataframe modified? False
* SettingWithCopyError
multi-rows from a single-typed DataFrame:
  Is view? False
* Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? &lt;weakref at 0x293C669AE50; to &#39;DataFrame&#39; at 0x293C66A43A0&gt;
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;)]
  Is original dataframe modified? False
* SettingWithCopyError
multi-columns from a mixed-type DataFrame:
  Is view? False
* Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? &lt;weakref at 0x293C66A3180; to &#39;DataFrame&#39; at 0x293C6698D00&gt;
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;)]
  Is original dataframe modified? False
multi-columns from a single-typed DataFrame:
  Is view? False
* Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;)]
  Is original dataframe modified? False
</code></pre></div>
</div>
<input id="__tabbed_7_4" name="__tabbed_7" type="radio" /><label for="__tabbed_7_4">切片</label><div class="tabbed-content">
<p>整数切片和标签切片得到的结果是一致的。</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-rows from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-rows from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">single_df</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-columns from a mixed-type DataFrame:&quot;</span><span class="p">)</span>
<span class="n">mixed_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">mixed_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;one&quot;</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">],</span> <span class="n">mixed_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;multi-columns from a single-typed DataFrame:&quot;</span><span class="p">)</span>
<span class="n">single_df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">single_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;one&quot;</span><span class="p">:</span><span class="s2">&quot;three&quot;</span><span class="p">],</span><span class="n">single_df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>multi-rows from a mixed-type DataFrame:
  Is view? False
* Is &#39;values.base&#39; None? False
  Is mixed-type? True
  Is copy? &lt;weakref at 0x293C66A5450; to &#39;DataFrame&#39; at 0x293C6635C40&gt;
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;), dtype(&#39;O&#39;)]
  Is original dataframe modified? False
* SettingWithCopyError
multi-rows from a single-typed DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? &lt;weakref at 0x293C664AC70; to &#39;DataFrame&#39; at 0x293C668CA90&gt;
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;)]
  Is original dataframe modified? False
* SettingWithCopyError
multi-columns from a mixed-type DataFrame:
  Is view? False
* Is &#39;values.base&#39; None? False
  Is mixed-type? True
  Is copy? None
  Result type: [dtype(&#39;int64&#39;), dtype(&#39;int64&#39;), dtype(&#39;O&#39;)]
  Is original dataframe modified? False
multi-columns from a single-typed DataFrame:
  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? &lt;weakref at 0x293C669D2C0; to &#39;DataFrame&#39; at 0x293C666C460&gt;
  Result type: [dtype(&#39;int64&#39;)]
  Is original dataframe modified? False
</code></pre></div>
</div>
</div>
<p>通过字典创建 DataFrame 时，pandas 永远不会创建视图，但通过 ndarray 创建 DataFrame <code>df</code>时，pandas 会创建视图，视图指向 ndarray。<code>df</code>的索引结果的<code>_is_view</code>属性也为<code>True</code>，但索引结果的视图并不指向<code>df</code>。此时，对索引结果进行修改，并不会影响<code>df</code>。</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="n">get_df_info</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">get_df_info</span><span class="p">(</span><span class="n">df</span><span class="p">[(</span><span class="n">df</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)],</span> <span class="n">df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: [dtype(&#39;float64&#39;), dtype(&#39;float64&#39;), dtype(&#39;float64&#39;)]

  Is view? True
  Is &#39;values.base&#39; None? False
  Is mixed-type? False
  Is copy? None
  Result type: [dtype(&#39;float64&#39;), dtype(&#39;float64&#39;), dtype(&#39;float64&#39;)]
  Is original dataframe modified? False
</code></pre></div>
<p>这意味着即使索引结果<code>_is_view</code>属性为<code>True</code>，我们也无法保证索引结果就是原DataFrame的视图，它也可能是某个 ndarray 的视图。有人会提出使用<code>df.values.base</code>属性替代私有属性<code>df._is_view</code>。但在上面的序列索引和切片索引的例子中，我们可以发现，<code>df.values.base</code>属性可能和<code>df._is_view</code>属性出现冲突。我不是熟悉 pandas 内部构造的专家，无法解释出现冲突的原因，但可以知道通过<code>df.values.base</code>属性也无法准确判断索引结果是否为原DataFrame的视图。</p>
<p>事实上，pandas 无法确定索引结果到底是副本，还是原DataFrame的视图，或者某个 ndarray 的视图。</p>
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">[(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>

<span class="c1"># Assign using equivalent notation to below</span>
<span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">_is_view</span><span class="p">)</span>

<span class="c1"># Assign using slightly different syntax</span>
<span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">_is_view</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>True
False
</code></pre></div>
<p>因为 NumPy 是可以预测地返回视图或副本，有人可能会困惑于基于 NumPy 的 pandas 为何不能预测地返回。NumPy 的索引规则虽然较复杂，但其索引种类和索引方式是比较单一的。而 pandas 为了实现功能更加强大且通用的索引，其索引并没有完全与与底层 NumPy 数组的功能相结合。随着时间的推移，pandas 索引的设计和底层 NumPy 功能之间的相互作用导致了一套复杂的规则，这些规则决定了是否可以返回视图或副本。</p>
<p>最终，只有一个简单的笨方法可以完全确定索引操作<code>x=df[]/df.loc[]/df.iloc[]</code>返回的结果是否为原DataFrame的视图，只需查看更改<code>x</code>中的值是否会影响<code>x</code>。如果是，则<code>x</code>为视图；如果不是，则<code>x</code>为副本。</p>
<h2 id="_9">链式赋值</h2>
<p>pandas 所有的 indexing-set 操作都会修改<code>df</code>本身。</p>
<div class="highlight"><pre><span></span><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;one&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="s2">&quot;two&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">]}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>   one  two
0  200  300
1  100   20
2  100   30
3  100   40
4  100   50
</code></pre></div>
<p>若<code>df</code>是由一些原始数据创建的DataFrame，我们无需担心（例如上面的代码）。一旦<code>df</code>是其他DataFrame的索引结果，<code>df</code>的 indexing-set 操作就有可能产生副作用，或者出现非预期的结果。</p>
<ul>
<li><code>df</code>是（临时）副本，而实际上想修改原DataFrame，此时代码不按预期工作。</li>
<li><code>df</code>是视图，对<code>df</code>进行修改会影响原DataFrame，若你不想修改原DataFrame，此时代码便出现副作用。</li>
</ul>
<p>上述两种情况只会在链式赋值（chained assignment）时发生。有经验的 pandas 开发者能自如地操作 pandas 的索引行为。然而对于 pandas 新手来说，链式索引几乎不可避免，同时，如上一节所述，pandas 无法预测地返回视图或副本，从而导致链式赋值的结果是不可预测的，很容易出现上述两种非预期的操作。因此，在2013年底，pandas 0.13.0 版本引入了<code>SettingWithCopyWarning</code>这个警告，以解决许多开发人员遇到的链式赋值失败的问题。</p>
<p>不幸的是，用 Jeff Reback （pandas 的核心开发者之一）的话来说，“从语言的角度来看，直接检测链式赋值是不可能的，只能进行推断。”</p>
<p>理解这句话，需要考虑 Python 解释器如何执行此代码：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># indexing-get</span>
<span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
<span class="c1"># becomes</span>
<span class="n">dfmi</span><span class="o">.</span><span class="n">loc</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">((</span><span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">)),</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>链式赋值有不同的处理方式：</p>
<div class="highlight"><pre><span></span><code><span class="c1"># chained assignment = indexing-get + indexing-set</span>
<span class="n">dfmi</span><span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">][</span><span class="s1">&#39;second&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<span class="c1"># becomes</span>
<span class="n">dfmi</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">)</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p><code>__getitem__</code>和<code>__setitem__</code>是两个独立的操作，<code>__setitem__</code>并不知道<code>__getitem__</code>。</p>
<p>关于chained assignment的警告/异常旨在通知用户可能存在无效的赋值，有可能出现误报（假阳性）、或者漏报（假阴性）的情况。</p>
<p>误报在早期的 pandas 版本中较为普遍，但此后大部分被消除了。为了完整起见，在此处收录一些常见的误报示例。如果您在使用较早版本的 pandas 时遇到以下任何情况，则可以安全地忽略或消除该警告（或通过升级完全避免该警告）。</p>
<details class="attention"><summary>误报示例</summary><p>使用已存在的列的值向<code>DataFrame</code> 中添加新列会<a href="https://stackoverflow.com/q/42105859/604687">生成警告</a>，但此问题已得到解决。</p>
<div class="highlight"><pre><span></span><code><span class="n">data</span><span class="p">[</span><span class="s1">&#39;bidtime_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">bidtime</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>在<code>DataFrame</code>的切片上使用<code>apply</code>方法进行 indexing-set 操作时，也会<a href="(https://stackoverflow.com/q/42190175/604687)">出现误报</a>，这也已经到解决。</p>
<div class="highlight"><pre><span></span><code><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;bidtime_hours&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">bidtime</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>pandas 0.17.0 的<code>DataFrame.sample</code>方法存在一个bug，会导致误报。现在<code>DataFrame.sample</code>方法总会返回副本。</p>
<div class="highlight"><pre><span></span><code><span class="n">sample</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">sample</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">sample</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
</details>
<p>直到现在，漏报还是很常见，漏报的示例参考“视图和副本”小节中的示例代码。</p>
<p>有时候，代码没有明显的链式赋值，<code>SettingWithCopy</code> 警告也会出现。实际上，你可能已经使用了链式赋值：</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">]]</span>  <span class="c1"># Is foo a view? A copy? Nobody knows!</span>
    <span class="c1"># ... many lines here ...</span>
    <span class="c1"># We don&#39;t know whether this will modify df or not!</span>
    <span class="n">foo</span><span class="p">[</span><span class="s1">&#39;quux&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">foo</span>
</code></pre></div>
<p>除非你完全明确索引操作的结果，否则忽略警告就像在代码中埋雷。幸运的是，<code>SettingWithCopyWarning</code>警告一般在链式赋值时才会出现。因此，学习一些技巧，避免使用链式赋值，便可消除警告信息。</p>
<ul>
<li>如果要修改原DataFrame，应该直接对原DataFrame进行 indexing-set 操作，而不是修改其视图。例如，使用<code>df.loc[0,'one']=10</code>，而不是<code>df['one'][0]=10</code>。</li>
<li>如果不想修改原DataFrame，应该显式创建 indexing-get 结果的副本，并对副本执行 indexing-set 操作。例如：<code>a=df['one'].copy(); a=10</code>。</li>
</ul>
<p>需要注意的是，虽然使用<code>.copy</code>方法可以绕开警告，但盲目使用<code>.copy</code>方法可能会带来另一个问题——<code>MemoryError</code>，这取决于所处理数据的大小和可用内存大小。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">memory_profiler</span> <span class="kn">import</span> <span class="n">profile</span>

<span class="nd">@profile</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">7</span><span class="p">))</span>

    <span class="n">d1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[:]</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">foo</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Line #    Mem usage    Increment  Occurences   Line Contents
#============================================================
     6     75.4 MiB     75.4 MiB           1   @profile
     7                                         def foo():
     8    228.0 MiB    152.7 MiB           1       df = pd.DataFrame(np.random.randn(2 * 10 ** 7))
     9
    10    228.0 MiB      0.0 MiB           1       d1 = df[:]
    11    380.6 MiB    152.6 MiB           1       d1 = d1.copy()
</code></pre></div>
<p>在上述示例中，<code>df1</code>是<code>df</code>的副本，但<code>df</code>占用的内存不会被自动回收，而是保留在内存中。即使执行<code>df=df[:].copy()</code>语句，旧的<code>df</code>数据和新的副本也会在短暂的时间内同时被存储在内存中。</p>
<p>pandas 提供了显式控制<code>SettingWithCopy</code>的<code>mode.chained_assignment</code>设置选项，该选项可以采用以下的值：</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span> <span class="s1">&#39;raise&#39;</span><span class="p">)</span> <span class="c1"># 引发异常</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span> <span class="s1">&#39;warn&#39;</span><span class="p">)</span>  <span class="c1"># 显示警告, 默认值</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>    <span class="c1"># 完全关闭警告</span>
</code></pre></div>
<p>如果开发团队中有经验不足的 pandas 开发人员，或者项目需要高度严谨，那么这可能特别有用。使用此设置的一种更精确的方法是使用上下文管理器。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># resets the option we set in the previous code segment</span>
<span class="n">pd</span><span class="o">.</span><span class="n">reset_option</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s1">&#39;mode.chained_assignment&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">bidder</span> <span class="o">==</span> <span class="s1">&#39;parakeet2004&#39;</span><span class="p">][</span><span class="s1">&#39;bidderrate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
</code></pre></div>
<p>这种方法支持细粒度的警告控制，而不是不加选择地影响整个环境。</p>
<h2 id="_10">索引方式总结表</h2>
<table>
<thead>
<tr>
<th>类型</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>df[val]</code></td>
<td>从DataFrame选取单列或一组列；<br />在特殊情况下比较便利：布尔型数组（过滤行）、切片（行切片）、或布尔型DataFrame (根据条件设置值）</td>
</tr>
<tr>
<td><code>df.loc[val]</code></td>
<td>通过标签，选取DataFrame的单个行或一组行</td>
</tr>
<tr>
<td><code>df.loc[:, val]</code></td>
<td>通过标签，选取单列或列子集</td>
</tr>
<tr>
<td><code>df.loc[val1, val2]</code></td>
<td>通过标签，同时选取行和列</td>
</tr>
<tr>
<td><code>df.iloc[where]</code></td>
<td>通过整数位置，从DataFrame选取单个行或行子集</td>
</tr>
<tr>
<td><code>df.iloc[:, where]</code></td>
<td>通过整数位置，从DataFrame选取单个列或列子集</td>
</tr>
<tr>
<td><code>df.iloc[where_i, where_j]</code></td>
<td>通过整数位置，同时选取行和列</td>
</tr>
<tr>
<td><code>df.at [label_i, label_j]</code></td>
<td>通过行和列标签，选取单一的标量</td>
</tr>
<tr>
<td><code>df.iat[i, j]</code></td>
<td>通过行和列的位置（整数），选取单一的标量</td>
</tr>
<tr>
<td><code>reindex</code></td>
<td>通过标签选取行或列</td>
</tr>
<tr>
<td><code>get _value, set_value</code></td>
<td>通过行和列标签选取单一值</td>
</tr>
</tbody>
</table>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="9.2.DataFra.html" class="md-footer__link md-footer__link--prev" aria-label="上一页: 9.2.DataFra" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              9.2.DataFra
            </div>
          </div>
        </a>
      
      
        
        <a href="9.4.%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1.html" class="md-footer__link md-footer__link--next" aria-label="下一页: 9.4.索引对象" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              9.4.索引对象
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
        <script src="../javascript/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>